# ğŸ—ï¸ X.com Enhanced Gallery - Architecture Guidelines

> **ìœ ì €ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ê°„ê²°í•œ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ**

## ğŸ“‹ ëª©ì°¨

1. [ì„¤ê³„ ì›ì¹™](#ì„¤ê³„-ì›ì¹™)
2. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
3. [ì˜ì¡´ì„± ê·œì¹™](#ì˜ì¡´ì„±-ê·œì¹™)
4. [ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²©ë¦¬](#ì™¸ë¶€-ë¼ì´ë¸ŒëŸ¬ë¦¬-ê²©ë¦¬)
5. [PC í™˜ê²½ ìµœì í™”](#pc-í™˜ê²½-ìµœì í™”)

---

## ğŸ¯ ì„¤ê³„ ì›ì¹™

### í•µì‹¬ ì² í•™

1. **ë‹¨ìˆœì„± ìš°ì„  (Simplicity First)**
   - ìœ ì €ìŠ¤í¬ë¦½íŠ¸ì— ì í•©í•œ ê°„ê²°í•œ êµ¬ì¡°
   - ê³¼ë„í•œ ì¶”ìƒí™” ì œê±°
   - ëª…í™•í•˜ê³  ì§ê´€ì ì¸ ì½”ë“œ

2. **PC í™˜ê²½ ì „ìš©**
   - í„°ì¹˜ ê¸°ë°˜ ì¸í„°ë™ì…˜ ì™„ì „ ì œê±°
   - ë§ˆìš°ìŠ¤/í‚¤ë³´ë“œ ì¤‘ì‹¬ ì¸í„°í˜ì´ìŠ¤
   - ë°ìŠ¤í¬í†± ë¸Œë¼ìš°ì € ì„±ëŠ¥ ìµœì í™”

3. **ì™¸ë¶€ ì˜ì¡´ì„± ê²©ë¦¬**
   - ëª¨ë“  ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê²©ë¦¬ ê³„ì¸µì—ì„œ ê´€ë¦¬
   - ë¼ì´ë¸ŒëŸ¬ë¦¬ êµì²´ ë° ì—…ë°ì´íŠ¸ ìš©ì´ì„±
   - í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°

4. **ë²ˆë“¤ í¬ê¸° ìµœì†Œí™”**
   - 250KB ë¯¸ë§Œ ìœ ì§€
   - Tree-shaking ìµœì í™”
   - ë¶ˆí•„ìš”í•œ ê¸°ëŠ¥ ì œê±°

## ğŸ›ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
src/
â”œâ”€â”€ features/                 # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ gallery/             # ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥
â”‚   â””â”€â”€ settings/            # ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ shared/                   # ê³µí†µ ì¬ì‚¬ìš© ëª¨ë“ˆ
â”‚   â”œâ”€â”€ components/          # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ hooks/               # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ state/               # ìƒíƒœ ê´€ë¦¬
â”‚   â””â”€â”€ external/            # ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²©ë¦¬
â””â”€â”€ main.ts                  # ì§„ì…ì 
```

### ê³„ì¸µë³„ ì—­í• 

- **Features**: ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ (ê°¤ëŸ¬ë¦¬, ì„¤ì • ë“±)
- **Shared**: ì—¬ëŸ¬ ê¸°ëŠ¥ì—ì„œ ì¬ì‚¬ìš©ë˜ëŠ” ê³µí†µ ìš”ì†Œ
- **External**: ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ë¸Œë¼ìš°ì € API ê²©ë¦¬

---

## ğŸ”— ì˜ì¡´ì„± ê·œì¹™

### ë‹¨ë°©í–¥ ì˜ì¡´ì„±

```
Features â†’ Shared â†’ External
```

- **Features**ëŠ” Sharedì™€ Externalì—ì„œ import ê°€ëŠ¥
- **Shared**ëŠ” Externalì—ì„œë§Œ import ê°€ëŠ¥
- **External**ì€ ìì²´ ì™„ê²°í˜• (ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì˜ì¡´)

### ê¸ˆì§€ëœ ì˜ì¡´ì„±

```typescript
// âŒ ê¸°ëŠ¥ ê°„ ì§ì ‘ ì˜ì¡´
import { GalleryService } from '@features/gallery';

// âœ… Sharedë¥¼ í†µí•œ í†µì‹ 
import { MediaService } from '@shared/services';
```

---

## ï¿½ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²©ë¦¬

### ê²©ë¦¬ ì›ì¹™

ëª¨ë“  ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë°˜ë“œì‹œ `@shared/external/vendors`ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼:

```typescript
// âŒ ì§ì ‘ import ê¸ˆì§€
import { render } from 'preact';
import { deflate } from 'fflate';

// âœ… ê²©ë¦¬ëœ ì ‘ê·¼
import { getPreact, getFflate } from '@shared/external/vendors';

const { render } = getPreact();
const { deflate } = getFflate();
```

### í˜„ì¬ ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬

| ë¼ì´ë¸ŒëŸ¬ë¦¬          | ìš©ë„          | í¬ê¸° |
| ------------------- | ------------- | ---- |
| **Preact**          | UI í”„ë ˆì„ì›Œí¬ | ~3KB |
| **@preact/signals** | ìƒíƒœ ê´€ë¦¬     | ~2KB |
| **fflate**          | ZIP ì••ì¶•      | ~8KB |

---

## ğŸ’» PC í™˜ê²½ ìµœì í™”

### ì§€ì› ì´ë²¤íŠ¸

```typescript
// âœ… PC í™˜ê²½ ì „ìš© ì´ë²¤íŠ¸
interface PCEvents {
  onClick: (event: MouseEvent) => void;
  onKeyDown: (event: KeyboardEvent) => void;
  onWheel: (event: WheelEvent) => void;
  onContextMenu: (event: MouseEvent) => void;
}

// âŒ í„°ì¹˜ ì´ë²¤íŠ¸ ì‚¬ìš© ê¸ˆì§€
// onTouchStart, onTouchMove, onTouchEnd ë“±
```

### í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

```typescript
const SUPPORTED_KEYS = {
  ESCAPE: 'Escape', // ê°¤ëŸ¬ë¦¬ ë‹«ê¸°
  ARROW_LEFT: 'ArrowLeft', // ì´ì „ ì´ë¯¸ì§€
  ARROW_RIGHT: 'ArrowRight', // ë‹¤ìŒ ì´ë¯¸ì§€
  F: 'f', // ì „ì²´í™”ë©´
} as const;
```

### ë§ˆìš°ìŠ¤ ì¸í„°ë™ì…˜

```typescript
// ë§ˆìš°ìŠ¤ íœ  ìŠ¤í¬ë¡¤
function handleWheel(event: WheelEvent) {
  if (event.deltaY > 0) {
    selectNext();
  } else {
    selectPrevious();
  }
}
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### ë²ˆë“¤ í¬ê¸° ê´€ë¦¬

- **ëª©í‘œ**: 250KB ë¯¸ë§Œ ìœ ì§€
- **Tree-shaking**: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ ìë™ ì œê±°
- **ì§€ì—° ë¡œë”©**: í•„ìš”ì‹œì—ë§Œ ëª¨ë“ˆ ë¡œë”©

### ë©”ëª¨ë¦¬ ê´€ë¦¬

```typescript
// ì´ë¯¸ì§€ ìºì‹œ ê´€ë¦¬
interface ImageCache {
  maxSize: number; // ìµœëŒ€ ìºì‹œ í¬ê¸°
  evictionPolicy: 'LRU'; // ì œê±° ì •ì±…
}

// ì»´í¬ë„ŒíŠ¸ ì •ë¦¬
useEffect(() => {
  return () => {
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
    // íƒ€ì´ë¨¸ ì •ë¦¬
    // ë©”ëª¨ë¦¬ í•´ì œ
  };
}, []);
```

---

## ï¿½ ì•„í‚¤í…ì²˜ ê²€ì¦

### ì˜ì¡´ì„± ê²€ì‚¬

```bash
# ìˆœí™˜ ì˜ì¡´ì„± ê²€ì‚¬
npm run deps:check

# ë²ˆë“¤ í¬ê¸° ë¶„ì„
npm run build:analyze
```

### í’ˆì§ˆ ê¸°ì¤€

- **íƒ€ì… ì•ˆì „ì„±**: strict TypeScript ëª¨ë“œ
- **ì½”ë“œ í’ˆì§ˆ**: ESLint + Prettier
- **ë²ˆë“¤ í¬ê¸°**: < 250KB
- **ë¡œë”© ì‹œê°„**: < 1ì´ˆ
- **PC ì „ìš©**: í„°ì¹˜ ì´ë²¤íŠ¸ 0ê°œ

---

<div align="center">

**ğŸ—ï¸ "Simplicity is the ultimate sophistication." - Leonardo da Vinci**

</div>
