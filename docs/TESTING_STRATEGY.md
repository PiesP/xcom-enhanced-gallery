# í…ŒìŠ¤íŠ¸ ì „ëµ ê°€ì´ë“œ (Testing Strategy)

> xcom-enhanced-gallery í”„ë¡œì íŠ¸ì˜ í…ŒìŠ¤íŠ¸ ì±…ì„ ë¶„ë¦¬ ë° ì‹¤í–‰ ì „ëµ

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-25 (Phase 170B+ í…ŒìŠ¤íŠ¸ í†µí•©)

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ (Testing Trophy)

Kent C. Doddsì˜ Testing Trophy ëª¨ë¸ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ë¶„í¬:

```
          /\
         /A11y\        â† ìµœì†Œ: ì ‘ê·¼ì„± ìë™ ê²€ì¦
        /------\
       /  E2E  \       â† ì ìŒ: í•µì‹¬ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤
      /----------\
     / Browser    \    â† ì†ŒëŸ‰: Solid.js ë°˜ì‘ì„±, ì‹¤ì œ API
    /--------------\
   /  Integration  \   â† ì¤‘ê°„: ì„œë¹„ìŠ¤ ê°„ ìƒí˜¸ì‘ìš©
  /------------------\
 /    Unit Tests     \ â† ë§ìŒ: ìˆœìˆ˜ ë¡œì§, ìœ í‹¸ë¦¬í‹°
/----------------------\
/  Static Analysis     \  â† ê°€ì¥ ë§ìŒ: TypeScript, ESLint, stylelint
```

**ì›ì¹™**: ë‚®ì€ ê³„ì¸µì—ì„œ ë¹ ë¥´ê²Œ ë§ì´ í…ŒìŠ¤íŠ¸í•˜ê³ , ë†’ì€ ê³„ì¸µì—ì„œ ëŠë¦¬ì§€ë§Œ ì‹ ë¢°ë„
ë†’ì€ í…ŒìŠ¤íŠ¸ë¥¼ ì„ ë³„ì ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

---

## ğŸ§© ìœ ì € ìŠ¤í¬ë¦½íŠ¸ íŠ¹í™” í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ (X.com)

> ìœ ì € ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¼ë°˜ ì›¹ì•±ê³¼ ë‹¬ë¦¬ â€œì™¸ë¶€ DOM/ë¸Œë¼ìš°ì € API ì˜ì¡´ + ì‹¤ì œ í™˜ê²½
> ì¤‘ìš”ì„±â€ì´ í¬ë¯€ë¡œ, ì•„ë˜ ê°€ì´ë“œë¥¼ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì „ëµ ìœ„ì— ì–¹ì–´ ì ìš©í•©ë‹ˆë‹¤.

### ê³ ë ¤ì‚¬í•­

- ì™¸ë¶€ DOM ì˜ì¡´ì„±: X.com DOM êµ¬ì¡° ë³€ê²½ì— ì·¨ì•½ â†’ ì„ íƒì ì¶”ìƒí™”ì™€ Fail-fast í•„ìš”
- ë¸Œë¼ìš°ì € API ì˜ì¡´ì„±: GM\_\*, localStorage, fetch ë“± â†’ Userscript/Vendor
  getterë¡œ ì£¼ì…
- ì‚¬ìš©ì ì¸í„°ë™ì…˜ ì¤‘ì‹¬: í´ë¦­, í‚¤ë³´ë“œ ì…ë ¥ ìœ„ì£¼ â†’ PC ì „ìš© ì´ë²¤íŠ¸ ì •ì±… ì¤€ìˆ˜
- ì‹¤ì œ í™˜ê²½ ì¤‘ìš”ì„±: í”„ë¡œë•ì…˜ì—ì„œë§Œ ë“œëŸ¬ë‚˜ëŠ” ì´ìŠˆ ì¡´ì¬ â†’ ìµœì†Œí•œì˜ E2E ìŠ¤ëª¨í¬ ìœ ì§€

### ê¶Œì¥ ë¶„í¬(ê°€ì´ë“œë¼ì¸)

```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   E2E (5%)   â”‚  â† ì‹¤ì œ X.com í™˜ê²½ (Playwright ìŠ¤ëª¨í¬)
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Integration (15%) â”‚  â† ë¸Œë¼ìš°ì €/DOM ìƒí˜¸ì‘ìš© ì¤‘ì‹¬(ë¸Œë¼ìš°ì € ëª¨ë“œ í¬í•¨)
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    Unit (60%)         â”‚  â† ìˆœìˆ˜ ë¡œì§/ì„œë¹„ìŠ¤/ìœ í‹¸ë¦¬í‹°
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Static Analysis (20%)      â”‚  â† íƒ€ì…/ë¦°íŠ¸/ë³´ì•ˆ
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ì´ ë¶„í¬ëŠ” â€œí…ŒìŠ¤íŠ¸ ë¹„ìš©/ì‹ ë¢°ë„/ìœ ì§€ë³´ìˆ˜ì„±â€ ê· í˜•ì„ ìœ„í•œ ëª©í‘œì¹˜ì…ë‹ˆë‹¤. ì‹¤ì œ ë¹„ìœ¨ì€
ì‹œì ë³„ë¡œ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë‚˜, ìƒìœ„ ë ˆì´ì–´(E2E) ì˜ì¡´ë„ ì¦ê°€ëŠ” ê°€ê¸‰ì  í”¼í•˜ê³  í•˜ìœ„
ë ˆì´ì–´(Unit/Static)ì„ ë‘í…ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.

### ë ˆì´ì–´ë³„ ë©”ëª¨(ìœ ì € ìŠ¤í¬ë¦½íŠ¸ ê´€ì )

- Static Analysis: `npm run typecheck` / `npm run lint` / `npm run codeql:check`
  - DOM/ë²¤ë”/GM APIë¥¼ ì§ì ‘ importí•˜ì§€ ì•Šê³  getter ê²½ìœ í•˜ëŠ”ì§€ ê·œì¹™ ê²€ì¦(CodeQL
    í¬í•¨)
- Unit: `npm run test:unit` (JSDOM)
  - ì„œë¹„ìŠ¤/ìœ í‹¸/íŒŒì¼ëª…/íŒŒì„œ ë“± ìˆœìˆ˜ ë¡œì§ì— ì§‘ì¤‘, ë¸Œë¼ìš°ì €/GM APIëŠ” ë°˜ë“œì‹œ ëª¨í‚¹
- Integration: `npm run test:browser`(ë¸Œë¼ìš°ì € ëª¨ë“œ) ë˜ëŠ” JSDOM í†µí•©
  - Solid ë°˜ì‘ì„±Â·ë ˆì´ì•„ì›ƒÂ·í¬ì»¤ìŠ¤Â·ì• ë‹ˆë©”ì´ì…˜ ë“± JSDOM í•œê³„ë¥¼ ë¸Œë¼ìš°ì € ëª¨ë“œë¡œ ë³´ì™„
- E2E: `npm run e2e:smoke` (+ ì ‘ê·¼ì„±: `npm run e2e:a11y`)
  - í•µì‹¬ ê²½ë¡œë§Œ ìœ ì§€, X.com DOM ë³€ê²½ì— ì·¨ì•½í•˜ë¯€ë¡œ ìŠ¤ëª¨í¬ ìˆ˜ì¤€ìœ¼ë¡œ ê´€ë¦¬

### ìœ ì € ìŠ¤í¬ë¦½íŠ¸ íŠ¹í™” Do & Donâ€™t

âœ… Do

- ì„ íƒì ìƒìˆ˜í™”/ì¶”ìƒí™”: `src/constants.ts`ì˜ `SELECTORS`/`STABLE_SELECTORS` ì‚¬ìš©
- ë¸Œë¼ìš°ì €/GM API ì¶”ìƒí™”:
  `@shared/external/vendors`/`@shared/external/userscript/adapter`ì˜ getter ì‚¬ìš©
  - ì˜ˆ: `const us = getUserscript(); await us.download(url, name)`
- Fail-fast: ì™¸ë¶€ DOM ë³€ê²½ ê°ì§€ ì‹œ ì¡°ê¸° ì˜ˆì™¸ + í´ë°± ê²½ë¡œ, ë¡œê¹…/í† ìŠ¤íŠ¸ë¡œ ê°€ì‹œí™”
- PC ì „ìš© ì´ë²¤íŠ¸ë§Œ ì‚¬ìš©: í‚¤ë‹¤ìš´/í´ë¦­/íœ  ë“± í—ˆìš© ëª©ë¡ ì¤€ìˆ˜ (Touch/Pointer ê¸ˆì§€)

âŒ Donâ€™t

- X.com ë‚´ë¶€ DOM ì…€ë ‰í„°ë¥¼ í…ŒìŠ¤íŠ¸ ì „ë°˜ì— í•˜ë“œì½”ë”©(ì¤‘ë³µ)í•˜ì§€ ë§ ê²ƒ â†’ ìƒìˆ˜/í—¬í¼
  ê²½ìœ 
- GM\_\*ë¥¼ ì½”ë“œ/í…ŒìŠ¤íŠ¸ì—ì„œ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ë§ ê²ƒ â†’ `getUserscript()` ê²½ìœ 
- E2E ë²”ìœ„ë¥¼ ë¶ˆí•„ìš”í•˜ê²Œ í™•ì¥í•˜ì§€ ë§ ê²ƒ â†’ ìŠ¤ëª¨í¬ë¡œ í•µì‹¬ ê²½ë¡œë§Œ ìœ ì§€
- ì‹¤ì œ ë‹¤ìš´ë¡œë“œë¥¼ í…ŒìŠ¤íŠ¸ì—ì„œ ìˆ˜í–‰í•˜ì§€ ë§ ê²ƒ â†’ Blob ìƒì„±/ZIP ì‘ì„±ê¹Œì§€ë¡œ í•œì •

### ì°¸ê³ : í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ ë§¤í•‘

- íŒŒì¼ëª…/ì •ê·œí™”/íŒŒì„œ/CRC/í¬ë§·íŒ… â†’ Unit (ëª¨í‚¹ 100%)
- ë¯¸ë””ì–´ ì¶”ì¶œ í”Œë¡œìš°/ì»´í¬ë„ŒíŠ¸ ë Œë”ë§/í‚¤ ì´ë²¤íŠ¸ â†’ Integration(JSDOM) ë˜ëŠ” Browser
  ëª¨ë“œ
- ê°¤ëŸ¬ë¦¬ ì˜¤í”ˆ/ë„¤ë¹„ê²Œì´ì…˜/íˆ´ë°” í‘œì‹œ â†’ E2E ìŠ¤ëª¨í¬(ì‹¤ì œ X.com í™˜ê²½, í•˜ë„¤ìŠ¤ API
  ì°¸ì¡°)
- ì ‘ê·¼ì„±(ARIA/ëŒ€ë¹„/í¬ì»¤ìŠ¤) â†’ Playwright + axe-core (`e2e:a11y`)

> ìì„¸í•œ í•˜ë„¤ìŠ¤/ë°˜ì‘ì„± ì œí•œ/Remount íŒ¨í„´ì€ `AGENTS.md`ì˜ E2E í…ŒìŠ¤íŠ¸ ê°€ì´ë“œì™€
> `playwright/harness/*`ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ íƒ€ì…ë³„ ì±…ì„ ë¶„ë¦¬

### 1. Static Analysis (ê°€ì¥ ë¹ ë¦„, ìˆ˜ì´ˆ)

- **ë„êµ¬**: TypeScript strict, ESLint, stylelint, CodeQL
- **ì±…ì„**: íƒ€ì… ì•ˆì •ì„±, ì½”ë”© ê·œì¹™ ìœ„ë°˜ ê°ì§€, ë³´ì•ˆ ì·¨ì•½ì  íƒì§€
- **ì‹¤í–‰**: `npm run validate` (typecheck + lint + format ì¼ê´„)
- **ì¥ì **: ì¦‰ê°ì  í”¼ë“œë°±, CI/pre-commit ìë™í™” ê°€ëŠ¥
- **ë‹¨ì **: ëŸ°íƒ€ì„ ë™ì‘ ê²€ì¦ ë¶ˆê°€

### 2. Unit Tests (JSDOM, 1-2ë¶„)

- **í™˜ê²½**: Vitest + JSDOM, `test/unit/**`
- **ì±…ì„**: ìˆœìˆ˜ í•¨ìˆ˜, ì„œë¹„ìŠ¤ ë¡œì§, ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ (ëª¨í‚¹ ê¸°ë°˜)
- **ì‹¤í–‰**: `npm run test:unit` (1389 passing)
- **ì¥ì **: ë¹ ë¥¸ ì‹¤í–‰, ì •í™•í•œ ì›ì¸ íŒŒì•…, ì‹ ì†í•œ í”¼ë“œë°±
- **ë‹¨ì **: JSDOM ì œì•½ (CSS ë ˆì´ì•„ì›ƒ, Solid.js ë°˜ì‘ì„± ì œí•œ)

**JSDOM ì£¼ìš” ì œì•½ì‚¬í•­**:

- âŒ Solid.js fine-grained reactivity (signal boundary ë¯¸ìˆ˜ë¦½)
- âŒ ë ˆì´ì•„ì›ƒ ê³„ì‚° (`getBoundingClientRect()` í•­ìƒ 0)
- âŒ IntersectionObserver, ResizeObserver (ë¶€ë¶„ ëª¨í‚¹ í•„ìš”)
- âœ… ì í•©: ìˆœìˆ˜ í•¨ìˆ˜, ë°ì´í„° ë³€í™˜, ì¡°ê±´ë¶€ ë Œë”ë§, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬

### 3. Browser Tests (Vitest + Chromium, 5-10ë¶„)

- **í™˜ê²½**: `@vitest/browser` + Playwright Chromium, `test/browser/**`
- **í…ŒìŠ¤íŠ¸ ìˆ˜**: **111 tests** (í˜„ì¬ ìƒíƒœ)
  - Solid.js Reactivity: 16 tests (Signal + Store + Advanced)
  - Events: 8 tests (click, keyboard, delegation, preventDefault)
  - Focus Management: 8 tests (í¬ì»¤ìŠ¤ ì´ë™, íŠ¸ë˜í•‘, ë³µì›)
  - Layout APIs: 8 tests (getBoundingClientRect, í¬ê¸°, ê°€ì‹œì„±)
  - Animations: 9 tests (CSS íŠ¸ëœì§€ì…˜, ì• ë‹ˆë©”ì´ì…˜, RAF)
  - Observers: 16 tests (MutationObserver 9 + ResizeObserver 7)
  - Scroll Chaining: 43 tests (ì²´ì´ë‹ ë°©ì§€, ë™ì‹œ ì…ë ¥, ë¦¬ì‚¬ì´ì¦ˆ, ì• ë‹ˆë©”ì´ì…˜)
  - Gallery Features: 3 tests (ì´ë¯¸ì§€ í• ëª¨ë“œ)

- **ì±…ì„**:
  - Solid.js fine-grained reactivity ì™„ì „ ê²€ì¦
  - ì‹¤ì œ ë¸Œë¼ìš°ì € API ë™ì‘ (ë ˆì´ì•„ì›ƒ, Observers, í¬ì»¤ìŠ¤)
  - PC ì „ìš© ì´ë²¤íŠ¸ ì •ì±… ê²€ì¦ (click, keydown, wheelë§Œ ì‚¬ìš©)
  - ë¸Œë¼ìš°ì € íŠ¹í™” ê¸°ëŠ¥ (ìŠ¤í¬ë¡¤, ì• ë‹ˆë©”ì´ì…˜, í¬ì»¤ìŠ¤ ê´€ë¦¬)

- **ì‹¤í–‰**:

  ```bash
  npm run test:browser        # ì „ì²´ (111 tests, ~8-10ì´ˆ)
  npm run test:browser:ui     # ë””ë²„ê¹… UI
  ```

- **ì¥ì **:
  - JSDOM ì œì•½ ì—†ìŒ (ì™„ì „í•œ Solid.js ë°˜ì‘ì„±)
  - ì‹¤ì œ ë¸Œë¼ìš°ì € í™˜ê²½ (ë ˆì´ì•„ì›ƒ, ì´ë²¤íŠ¸, í¬ì»¤ìŠ¤)
  - E2Eë³´ë‹¤ ë¹ ë¥´ê³  ìœ ì§€ë³´ìˆ˜ ìš©ì´

- **ë‹¨ì **:
  - JSDOMë³´ë‹¤ ëŠë¦¼ (~8-10ì´ˆ vs ~1-2ì´ˆ)
  - ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©

- **íŒŒì¼ êµ¬ì¡°**: `test/browser/` ì°¸ê³ 

### 4. Integration Tests (JSDOM + ëª¨í‚¹, 2-5ë¶„)

- **í™˜ê²½**: Vitest + JSDOM, `test/integration/**`
- **ì±…ì„**: ë‹¤ì¤‘ ì„œë¹„ìŠ¤ í˜‘ì—…, ìƒíƒœ ë™ê¸°í™”, API ëª¨í‚¹ ê¸°ë°˜ ë°ì´í„° íë¦„
- **ì‹¤í–‰**: `npm run test:unit` (í†µí•© í¬í•¨)
- **ì¥ì **: ì„œë¹„ìŠ¤ ê²½ê³„ ê²€ì¦, ë†’ì€ ì‹ ë¢°ë„, E2Eë³´ë‹¤ ë¹ ë¦„
- **ë‹¨ì **: ë³µì¡í•œ ì„¤ì •, JSDOM ì œì•½ ë™ì¼ ì ìš©

### 5. E2E Tests (Playwright, 5-15ë¶„)

- **í™˜ê²½**: Playwright + Chromium, `playwright/smoke/**`
- **í…ŒìŠ¤íŠ¸ ìˆ˜**: **44 passed / 1 skipped** (97.8% í†µê³¼ìœ¨)
- **ì±…ì„**: í•µì‹¬ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤, Solid.js ì‹¤ì œ ë™ì‘, ë¸Œë¼ìš°ì € ì „ìš© API
- **ì‹¤í–‰**: `npm run e2e:smoke`
- **ì¥ì **: ì‹¤ì œ ë¸Œë¼ìš°ì € ì‹ ë¢°ë„, JSDOM ì œì•½ ì—†ìŒ, ì „ì²´ íë¦„ ê²€ì¦
- **ë‹¨ì **: ëŠë¦° ì‹¤í–‰, ë””ë²„ê¹… ì–´ë ¤ì›€, ë³µì¡í•œ ì¸í”„ë¼

**E2E Harness Pattern**:

`playwright/harness/` APIë¡œ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸/ì–¸ë§ˆìš´íŠ¸. Solid.js ë°˜ì‘ì„± ì œì•½ìœ¼ë¡œ
Remount íŒ¨í„´ ì‚¬ìš© (ìì„¸í•œ ë‚´ìš©: `AGENTS.md` E2E ê°€ì´ë“œ)

### 6. Accessibility Tests (Playwright + axe-core, 3-8ë¶„)

- **í™˜ê²½**: Playwright + `@axe-core/playwright`, `playwright/accessibility/**`
- **í…ŒìŠ¤íŠ¸ ìˆ˜**: **14 tests** (Gallery 4, Toolbar 6, KeyboardHelpOverlay 4,
  Toast 4)
- **ì±…ì„**: WCAG 2.1 Level AA ì¤€ìˆ˜, ìƒ‰ìƒ ëŒ€ë¹„, í‚¤ë³´ë“œ íƒìƒ‰, ARIA ë ˆì´ë¸”
- **ì‹¤í–‰**: `npm run e2e:a11y`
- **ì¥ì **: ìë™í™”ëœ ì ‘ê·¼ì„± ê²€ì¦, WCAG ì¤€ìˆ˜ ë³´ì¥, CI í†µí•© ê°€ëŠ¥
- **ë‹¨ì **: ìë™ ê²€ì¦ í•œê³„ (57% ì´ìŠˆë§Œ ê°ì§€), ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•„ìš”

**axe-core ì£¼ìš” íƒœê·¸**: `wcag2a`, `wcag2aa`, `wcag21a`, `wcag21aa`,
`best-practice`

---

## ğŸš€ ì‹¤í–‰ ì „ëµ

### ê°œë°œ ì¤‘ (ë¡œì»¬)

| ë‹¨ê³„ | ëª…ë ¹ì–´                                | ì†Œìš” ì‹œê°„ | ëª©ì                |
| ---- | ------------------------------------- | --------- | ------------------ |
| 1    | `npm run typecheck`                   | ìˆ˜ì´ˆ      | íƒ€ì… ê²€ì¦          |
| 2    | `npm run test:watch -- -t "í…ŒìŠ¤íŠ¸ëª…"` | ì¦‰ì‹œ      | ê´€ë ¨ í…ŒìŠ¤íŠ¸ë§Œ ì›Œì¹˜ |
| 3    | `npm run test:unit`                   | 1-2ë¶„     | ì „ì²´ ë‹¨ìœ„+í†µí•©     |
| 4    | `npm run test:fast`                   | 30ì´ˆ      | ë¹ ë¥¸ ë‹¨ìœ„+ìŠ¤ëª¨í¬   |

### Pre-Push (Git Hook)

```bash
# Husky ìë™ ì‹¤í–‰ (ê¸°ë³¸: smoke í”„ë¡œì íŠ¸, 10-20ì´ˆ)
git push

# ì „ì²´ ìŠ¤ìœ„íŠ¸ (5-10ë¶„)
export XEG_PREPUSH_SCOPE='full'
git push
```

### CI (GitHub Actions)

1. `npm run typecheck` â†’ íƒ€ì… ì²´í¬
2. `npm run lint` â†’ ESLint ê²€ì¦
3. `npm test` â†’ ì „ì²´ JSDOM í…ŒìŠ¤íŠ¸ (ì»¤ë²„ë¦¬ì§€ í¬í•¨, Node 22)
4. `npm run test:browser` â†’ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ (2ê°œ ìƒ¤ë“œ ë³‘ë ¬)
5. `npm run e2e:smoke` â†’ E2E ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸
6. `npm run e2e:a11y` â†’ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸
7. `npm run build` â†’ dev + prod ë¹Œë“œ ê²€ì¦

**CI ìµœì í™”**:

- Node 22 ë‹¨ì¼ í™˜ê²½ (10-15ë¶„ ì ˆì•½)
- ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ìƒ¤ë”© (5ë¶„ ì ˆì•½)
- Playwright ë¸Œë¼ìš°ì € ìºì‹± (30-60ì´ˆ ì ˆì•½)
- ì˜ˆìƒ ì´ ì‹œê°„: ~8-10ë¶„

---

## ğŸ“¦ Vitest Projects

`vitest.config.ts`ì—ì„œ projectsë¡œ í…ŒìŠ¤íŠ¸ ë¶„í• :

| Project         | ë²”ìœ„                      | ì‹¤í–‰ ì‹œê°„ | ëª…ë ¹ì–´                  |
| --------------- | ------------------------- | --------- | ----------------------- |
| **smoke**       | êµ¬ì„±/í† í° ê°€ë“œ            | 10-20ì´ˆ   | `npm run test:smoke`    |
| **fast**        | ë¹ ë¥¸ ë‹¨ìœ„ (RED/ë²¤ì¹˜ ì œì™¸) | 30-60ì´ˆ   | `npm run test:fast`     |
| **unit**        | ì „ì²´ ë‹¨ìœ„                 | 1-2ë¶„     | `npm run test:unit`     |
| **browser**     | ë¸Œë¼ìš°ì € ëª¨ë“œ             | 2-5ë¶„     | `npm run test:browser`  |
| **styles**      | ìŠ¤íƒ€ì¼/í† í°/ì •ì±…          | 20-40ì´ˆ   | `npm run test:styles`   |
| **performance** | ì„±ëŠ¥/ë²¤ì¹˜ë§ˆí¬             | 40-80ì´ˆ   | `npm run test:perf`     |
| **phases**      | ë‹¨ê³„ë³„(phase-\*)          | 1-2ë¶„     | `npm run test:phases`   |
| **refactor**    | ë¦¬íŒ©í† ë§ ê°€ë“œ             | 1-2ë¶„     | `npm run test:refactor` |

---

## ğŸ” í…ŒìŠ¤íŠ¸ ì„ íƒ ê¸°ì¤€

### JSDOM ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‚¬ìš©

- âœ… ìˆœìˆ˜ í•¨ìˆ˜ (`utils/`, `helpers/`)
- âœ… ì„œë¹„ìŠ¤ ë¡œì§ (API ëª¨í‚¹)
- âœ… ì¡°ê±´ë¶€ ë Œë”ë§ (props â†’ JSX)
- âœ… ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í˜¸ì¶œ ê²€ì¦

### Browser í…ŒìŠ¤íŠ¸ ì‚¬ìš©

- âœ… Solid.js ë°˜ì‘ì„± (Signal/Store â†’ DOM)
- âœ… ë ˆì´ì•„ì›ƒ ê³„ì‚° (í¬ê¸°, ìœ„ì¹˜)
- âœ… ë¸Œë¼ìš°ì € API (IntersectionObserver, ResizeObserver)
- âœ… ì• ë‹ˆë©”ì´ì…˜/íŠ¸ëœì§€ì…˜

### E2E í…ŒìŠ¤íŠ¸ ì‚¬ìš©

- âœ… í•µì‹¬ ì‚¬ìš©ì ì—¬ì •
- âœ… ë‹¤ì¤‘ í˜ì´ì§€/ì»´í¬ë„ŒíŠ¸ ìƒí˜¸ì‘ìš©
- âœ… ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ (í•„ìš” ì‹œ)
- âœ… ë¸Œë¼ìš°ì € ê°„ í˜¸í™˜ì„±

### ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ ì‚¬ìš©

- âœ… ëª¨ë“  ì‚¬ìš©ì ëŒ€ë©´ ì»´í¬ë„ŒíŠ¸
- âœ… ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œ (ë²„íŠ¼, ë§í¬, í¼)
- âœ… ë™ì  ì½˜í…ì¸  (Toast, Modal, Dropdown)
- âš ï¸ ìˆ˜ë™ ê²€ì¦ ë³‘í–‰ (ìŠ¤í¬ë¦° ë¦¬ë”, ê³ ëŒ€ë¹„ ëª¨ë“œ)

---

## ğŸ¯ npm run build vs npm test: ìš°ì„ ìˆœìœ„ ê°€ì´ë“œ (2025-10-24 ì¶”ê°€)

### ğŸ“Œ ê°œìš”

í”„ë¡œì íŠ¸ëŠ” **2ê°€ì§€ ê²€ì¦ ë°©ì‹**ì„ ì œê³µí•©ë‹ˆë‹¤:

1. **`npm run build`** (ê¶Œì¥ â­): í”„ë¡œë•ì…˜ ê²€ì¦ íŒŒì´í”„ë¼ì¸
2. **`npm test`** (ê°œë°œ í¸ì˜ìš©): Vitest projects ë¶„ë¦¬ ì‹¤í–‰

### ğŸ“Š ìƒì„¸ ë¹„êµ

| í•­ëª©          | npm run build                                     | npm test                   | ê¶Œì¥ ìƒí™© |
| ------------- | ------------------------------------------------- | -------------------------- | --------- |
| **ì‹¤í–‰ ë²”ìœ„** | ì „ì²´ ê²€ì¦ íŒŒì´í”„ë¼ì¸                              | vitest projects ë¶„ë¦¬       |           |
| **í¬í•¨ ë‚´ìš©** | typecheck, lint, deps, CodeQL, browser, E2E, a11y | fast + raf-timing projects |           |
| **ì‹ ë¢°ë„**    | âœ… ë†’ìŒ (í”„ë¡œë•ì…˜ ì¤€ë¹„)                           | âš ï¸ ë‚®ìŒ (í”„ë¡œì íŠ¸ ê²©ë¦¬)    |           |
| **ì‹¤í–‰ ì‹œê°„** | ~8-10ë¶„                                           | ~1-2ë¶„ (fastë§Œ ì‹œ)         |           |
| **ìš©ë„**      | CI, ë¦´ë¦¬ì¦ˆ ê²€ì¦                                   | ë¡œì»¬ ê°œë°œ í”¼ë“œë°±           |           |
| **ì‹¤íŒ¨ ì˜í–¥** | ë°°í¬ ì°¨ë‹¨                                         | ê°œë°œ ì†ë„ ì˜í–¥             |           |

### ğŸ” ìƒì„¸ ì„¤ëª…

#### **npm run build** (ê¶Œì¥ - ì‹ ë¢°ë„ ìµœìš°ì„ )

**í¬í•¨ ê²€ì¦**:

- âœ… TypeScript strict mode (`npm run typecheck`)
- âœ… ESLint, stylelint (`npm run lint`)
- âœ… ì˜ì¡´ì„± ê²€ì¦ (`dependency-cruiser` - 0 violations)
- âœ… ë³´ì•ˆ ë¶„ì„ (`CodeQL` - 5ê°œ custom queries)
- âœ… ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ (Vitest + Chromium, 14 íŒŒì¼ 111 í…ŒìŠ¤íŠ¸)
- âœ… E2E ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸ (Playwright, 97 í…ŒìŠ¤íŠ¸ ì¤‘ 89 í†µê³¼ ê¶Œì¥)
- âœ… ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (axe-core, 34 í…ŒìŠ¤íŠ¸)

**ê²°ê³¼**:

- ë¹Œë“œ í¬ê¸° ê²€ì¦: 339.65 KB (ì œí•œ: 420 KB)
- ì‚°ì¶œë¬¼ ë¬´ê²°ì„± ê²€ì¦
- í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ íŒì •

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**:

- âœ… CI/CD íŒŒì´í”„ë¼ì¸ (GitHub Actions)
- âœ… ë°°í¬ ì „ ìµœì¢… ê²€ì¦
- âœ… ì£¼ìš” ê¸°ëŠ¥ ì™„ë£Œ í›„ í’ˆì§ˆ ë³´ì¥
- âœ… ë¹Œë“œ í¬ê¸° ì¶”ì 

#### **npm test** (ê°œë°œ í¸ì˜ - ë¹ ë¥¸ í”¼ë“œë°±)

**ì‹¤í–‰ ë°©ì‹**:

```bash
npm test  # = vitest --project fast run && npm run test:raf
```

**íŠ¹ì§•**:

- fast í”„ë¡œì íŠ¸: ì£¼ìš” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ë¹ ë¦„, ~30-60ì´ˆ)
- raf-timing í”„ë¡œì íŠ¸: RAF/í¬ì»¤ìŠ¤ í…ŒìŠ¤íŠ¸ (ê²©ë¦¬)
- vitest projects ë¶„ë¦¬ë¡œ ì¸í•œ í™˜ê²½ ë‹¨í¸í™”

**ì œì•½ì‚¬í•­**:

- âš ï¸ í”„ë¡œë•ì…˜ E2E ê²€ì¦ ë¯¸í¬í•¨ (í•˜ë„¤ìŠ¤ ê¸°ë°˜ë§Œ)
- âš ï¸ ì ‘ê·¼ì„± ìë™ ê²€ì¦ ë¯¸í¬í•¨
- âš ï¸ ë¹Œë“œ í¬ê¸° ê²€ì¦ ë¯¸í¬í•¨
- âš ï¸ ì¼ë¶€ í…ŒìŠ¤íŠ¸ëŠ” í”„ë¡œì íŠ¸ ê²©ë¦¬ë¡œ ì¸í•´ ìƒíƒœ ì´ìƒ ê°€ëŠ¥

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**:

- âœ… ê°œë°œ ì¤‘ ì‹ ì†í•œ í”¼ë“œë°± (ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ)
- âœ… íŠ¹ì • ê¸°ëŠ¥ ê²€ì¦ (ë¹ ë¥¸ ë°˜ë³µ)
- âœ… ë¡œì»¬ ê°œë°œ ì‚¬ì´í´

### ğŸ’¡ ê°œë°œì ê°€ì´ë“œ (ì¶”ì²œ ì›Œí¬í”Œë¡œìš°)

#### **ì¼ë°˜ì ì¸ ê°œë°œ**

```bash
# 1ë‹¨ê³„: ê¸°ëŠ¥ ê°œë°œ ì¤‘ ì‹ ì†í•œ í”¼ë“œë°±
npm run test:watch -- -t "ê¸°ëŠ¥ëª…"  # 1-2ì´ˆ í”¼ë“œë°±

# 2ë‹¨ê³„: PR/ë¦¬ë·° ì „ ìµœì¢… ê²€ì¦
npm run build  # 8-10ë¶„, ëª¨ë“  ê²€ì¦ í¬í•¨

# 3ë‹¨ê³„: ì»¤ë°‹ ì¤€ë¹„
git push  # pre-push hook: npm run test:smokeë§Œ ìë™ ì‹¤í–‰
```

#### **ë²„ê·¸ ìˆ˜ì •**

```bash
# ë¹ ë¥¸ ê²€ì¦ â†’ ì „ì²´ ê²€ì¦
npm run test:fast  # 30-60ì´ˆ
npm run build      # ìµœì¢… í™•ì¸
```

#### **ì£¼ìš” ê¸°ëŠ¥ ì¶”ê°€**

```bash
# ì² ì €í•œ ê²€ì¦ í•„ìš”
npm run build    # ë°˜ë“œì‹œ í†µê³¼í•´ì•¼ í•¨
git push -u origin feature/...
```

### âš ï¸ ì£¼ì˜ì‚¬í•­

1. **npm test ì‹¤íŒ¨ â‰  ë°°í¬ ë¶ˆê°€**
   - npm run build í†µê³¼ë©´ í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
   - npm testëŠ” ê°œë°œ í¸ì˜ìš©ìœ¼ë¡œë§Œ ì·¨ê¸‰

2. **CI ì •ì±…**
   - CIì—ì„œëŠ” `npm run build` í†µê³¼ í•„ìˆ˜
   - ëª¨ë“  ê²€ì¦(E2E, a11y)ì„ ìë™í™”

3. **ë¡œì»¬ ê°œë°œ**
   - npm testë¡œ ë¹ ë¥¸ í”¼ë“œë°±
   - ìµœì¢… ì»¤ë°‹ ì „ `npm run build` í™•ì¸ ê¶Œì¥

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- **[AGENTS.md](../AGENTS.md)**: E2E í•˜ë„¤ìŠ¤ íŒ¨í„´, Solid.js ë°˜ì‘ì„± ì œì•½ì‚¬í•­
- **[SOLID_REACTIVITY_LESSONS.md](./SOLID_REACTIVITY_LESSONS.md)**: Solid.js
  ë°˜ì‘ì„± ì‹œìŠ¤í…œ êµí›ˆ
- **[ARCHITECTURE.md](./ARCHITECTURE.md)**: 3ê³„ì¸µ êµ¬ì¡° (Features â†’ Shared â†’
  External)
- **[test/README.md](../test/README.md)**: Vitest ì‚¬ìš©ë²•, DOM ì‹œë®¬ë ˆì´ì…˜
- **[test/archive/README.md](../test/archive/README.md)**: ì•„ì¹´ì´ë¸Œ ì •ì±… ë° ê³¼ê±°
  Phase ê¸°ë¡

---

## ğŸ›¡ï¸ í”„ë¡œì íŠ¸ ìƒíƒœ ê²€ì¦ (Phase 170B+)

### ê°€ë“œ í…ŒìŠ¤íŠ¸ (test/guards/project-health.test.ts)

í˜„ì¬ í”„ë¡œì íŠ¸ ìƒíƒœë¥¼ ê²€ì¦í•˜ëŠ” ìµœì†Œ ê°€ë“œ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤:

```bash
# ì‹¤í–‰ ë°©ë²•
npx vitest run test/guards/

# ë˜ëŠ” ì „ì²´ í…ŒìŠ¤íŠ¸ì˜ ì¼ë¶€ë¡œ
npm test
```

**ê²€ì¦ í•­ëª©**:

1. **ë¹Œë“œ ìƒíƒœ**: ë²ˆë“¤ í¬ê¸° 339.55 KB (ì œí•œ 420 KB) âœ…
2. **ì•„í‚¤í…ì²˜**: 3ê³„ì¸µ êµ¬ì¡° (Features â†’ Shared â†’ External) âœ…
3. **ì½”ë”© ê·œì¹™**: Vendor getter, PC ì´ë²¤íŠ¸, ë””ìì¸ í† í° âœ…
4. **í…ŒìŠ¤íŠ¸ êµ¬ì¡°**: í•„ìˆ˜ í´ë” ë° íŒŒì¼ ì¡´ì¬ í™•ì¸ âœ…
5. **ì„œë¹„ìŠ¤ í‘œì¤€í™”**: ë¡œê¹… ì ‘ë‘ì‚¬ [ServiceName] âœ…
6. **íšŒê·€ ë°©ì§€**: ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë²ˆë“¤ í¬ê¸° ì¦ê°€ ê°ì§€ âœ…

### í…ŒìŠ¤íŠ¸ ì•„ì¹´ì´ë¸Œ (test/archive/)

**ì •ì±…**: ì™„ë£Œëœ Phase ë° ê³¼ê±° ê°œë°œ ë‹¨ê³„ì˜ í…ŒìŠ¤íŠ¸ëŠ” test/archiveì—ì„œ ì¼ê´„ ê´€ë¦¬

**í´ë” êµ¬ì¡°**:

```
test/archive/
  â”œâ”€â”€ cleanup-phases/           # Phase 1~7 ì •ë¦¬ í…ŒìŠ¤íŠ¸
  â”œâ”€â”€ integration-behavioral/   # ê³¼ê±° í–‰ìœ„ ê²€ì¦ í…ŒìŠ¤íŠ¸
  â””â”€â”€ integration/              # test/integration ì•„ì¹´ì´ë¸Œ (Phase 171B)
```

**í¬í•¨ í•­ëª©**:

- **cleanup-phases/**: Phase 1~7 ì •ë¦¬ í…ŒìŠ¤íŠ¸
  - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ ì œê±°, ë„¤ì´ë° ì •ë¦¬ ë“± ê³¼ê±° ë‹¨ê³„
- **integration-behavioral/**: ê³¼ê±° í–‰ìœ„ ê²€ì¦ í…ŒìŠ¤íŠ¸
  - `user-interactions-fixed.test.ts`: Mock ê¸°ë°˜ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© (ë¹„íš¨ìœ¨ì  íŒ¨í„´)
  - `toolbar-visibility-fix.test.ts`: ë¬¸ìì—´ ê¸°ë°˜ CSS ê²€ì¦ (ì‹¤ì œ ì ìš© ë¯¸ê²€ì¦)
- **integration/**: test/integration êµ¬ì‹ í…ŒìŠ¤íŠ¸ (Phase 171B ì´ë™)
  - `bundle-vendor-tdz.test.ts`: TDD RED ë‹¨ê³„ (Phase 170B+ í•´ê²°)
  - `extension.integration.test.ts`: Placeholder í…ŒìŠ¤íŠ¸
  - `master-test-suite.test.ts`: Phase 4 ì™„ë£Œ ë§ˆì»¤
  - `vendor-tdz-resolution.test.ts`: TDD GREEN ë‹¨ê³„ (Phase 170B í•´ê²°)

**ì´ìœ **:

- í˜„ì¬ Phase 170B+ ìƒíƒœì— ë¹„íš¨ìœ¨ì  ë˜ëŠ” ë¶ˆí•„ìš”í•¨
- ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ê°ì†Œ, í”„ë¡œì íŠ¸ êµ¬ì¡° ê°„ê²°í™”
- CI ë¶€í•˜ ìµœì†Œí™” (ë¶ˆí•„ìš”í•œ í…ŒìŠ¤íŠ¸ ì œì™¸)
- ì°¸ê³ ìš© ìë£Œë¡œ í™œìš© (ê³¼ê±° ì´ìŠˆ ì¶”ì , í…ŒìŠ¤íŠ¸ íŒ¨í„´ ê°œì„  ì˜ê°)

**ìƒíƒœ**: CI/ë¡œì»¬ í…ŒìŠ¤íŠ¸ì—ì„œ ì œì™¸, ê° í´ë” README.mdì™€ í•¨ê»˜ ì°¸ê³ ìš© ë³´ê´€

**ë³µì›**: í•„ìš”ì‹œ [test/archive/README.md](../test/archive/README.md) ì°¸ê³ 

---

**í…ŒìŠ¤íŠ¸ ì •ì±…**: ìƒˆ ê¸°ëŠ¥ì€ ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ì™€ í•¨ê»˜ ì œì¶œ. TDD ê¶Œì¥ (RED â†’ GREEN â†’
REFACTOR). **í˜„ì¬ ìƒíƒœ**: 1389 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, 60 ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸, 44 E2E í…ŒìŠ¤íŠ¸,
14 ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (100% í†µê³¼ìœ¨) âœ… **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-25 (ê°€ë“œ
í…ŒìŠ¤íŠ¸, ì•„ì¹´ì´ë¸Œ ì •ì±…, í–‰ìœ„ í…ŒìŠ¤íŠ¸ ì•„ì¹´ì´ë¸Œí™”, performance ì•„ì¹´ì´ë¸Œ ì¶”ê°€)

---

## âš¡ Vitest ê³ ì†í™” ì „ëµ

> **ëª©í‘œ**: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ 30~50% ì´ìƒ ë‹¨ì¶• (ë¡œì»¬ + CI)
> **í˜„ì¬**: ë¡œì»¬ ~60-80ì´ˆ, CI ~15-20ë¶„
> **ëª©í‘œ**: ë¡œì»¬ ~30-40ì´ˆ, CI ~8-10ë¶„

### ì´ë¯¸ ì ìš©ëœ ìµœì í™” âœ…

| ì „ëµ | í˜„ì¬ ìƒíƒœ | ìœ„ì¹˜ |
|-----|---------|------|
| Pool ìµœì í™” | `threads` (forks ëŒ€ì‹ ) | `vitest.config.ts` |
| CPU ê¸°ë°˜ ì œí•œ | `maxThreads = CPU_COUNT-1` | `vitest.config.ts` |
| Projects ë¶„í•  | 11ê°œ í”„ë¡œì íŠ¸ | `vitest.config.ts` |
| ì˜ì¡´ì„± inline | solid-js, @features ë“± | `vitest.config.ts` |
| í™˜ê²½ ì„¤ì • | jsdom (ì•ˆì •ì„± ìš°ì„ ) | `vitest.config.ts` |

### ì¶”ê°€ ìµœì í™” ê¸°íšŒ ğŸ”

#### 1ï¸âƒ£ ê²©ë¦¬(Isolation) ë¹„í™œì„±í™”

- **íš¨ê³¼**: smoke/fast í”„ë¡œì íŠ¸ì—ì„œ 3~8ë°° ë¹ ë¦„
- **ì„¤ì •**: `isolate: false` (ë¶€ì‘ìš© ìµœì†Œ í”„ë¡œì íŠ¸ë§Œ)
- **ìœ„í—˜**: í…ŒìŠ¤íŠ¸ ê°„ ìƒíƒœ ê³µìœ  â†’ `afterEach` ì •ë¦¬ ê°•í™” í•„ìš”

#### 2ï¸âƒ£ ìºì‹± ëª…ì‹œí™”

- **ì„¤ì •**: `cache.dir`, `cache.ttl: 24h` (vitest.config.ts)
- **íš¨ê³¼**: ì¬ì‹¤í–‰ ì„±ëŠ¥ ì¼ê´€ì„± ë³´ì¥ (~5-10% í–¥ìƒ)

#### 3ï¸âƒ£ í™˜ê²½ ìµœì í™” (happy-dom vs jsdom)

| í•­ëª© | jsdom (í˜„ì¬) | happy-dom |
|-----|-----------|----------|
| Import ì†ë„ | ê¸°ì¤€ (1x) | 3ë°° ë¹ ë¦„ |
| ë©”ëª¨ë¦¬ | ë†’ìŒ | ë‚®ìŒ |
| Solid ë°˜ì‘ì„± | âœ… ì™„ì „ | âš ï¸ ì œì•½ |
| ì¶”ì²œ | í˜„ì¬ ìœ ì§€ | í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸ í•„ìš” |

**ê¶Œì¥**: smoke í”„ë¡œì íŠ¸ì—ì„œ happy-dom í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸ â†’ ê²°ì •

#### 4ï¸âƒ£ íŒŒì¼ ë³‘ë ¬ ì²˜ë¦¬ ì¡°ì •

- **ì„¤ì •**: `fileParallelism: false` (ì‘ì€ í”„ë¡œì íŠ¸: smoke/fast/styles)
- **íš¨ê³¼**: ì‹œì‘ ì˜¤ë²„í—¤ë“œ ê°ì†Œ (~5% í–¥ìƒ)

#### 5ï¸âƒ£ CI/CD ìƒ¤ë”©

- **ì„¤ì •**: `.github/workflows/ci.yml`ì—ì„œ 4ê°œ ë³‘ë ¬ ì‘ì—…
- **íš¨ê³¼**: CI ì‹œê°„ 4ë¶„ì˜ 1ë¡œ ë‹¨ì¶• (75% í–¥ìƒ)
- **ì˜ˆì‹œ**:

  ```bash
  vitest --reporter=blob --shard=1/4
  vitest --reporter=blob --shard=2/4
  # ... (3,4 ë™ì¼)
  npx vitest --merge-reports
  ```

### ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš

#### Phase 1: ê¸°ì´ˆ ì„¤ì • (ì¦‰ì‹œ) â€” 10~15% í–¥ìƒ

1. vitest.config.ts: ìºì‹± ì„¤ì • ì¶”ê°€
2. smoke í”„ë¡œì íŠ¸: `isolate: false` í…ŒìŠ¤íŠ¸
3. ì„±ëŠ¥ ì¸¡ì •: `npm run test:smoke --reporter=verbose`

#### Phase 2: í™˜ê²½ ìµœì í™” (1ì£¼) â€” 30~50% í–¥ìƒ

1. happy-dom í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸ (ì„ì‹œ í”„ë¡œì íŠ¸)
2. smoke/fastì— happy-dom ì ìš© ì—¬ë¶€ ê²°ì •
3. CSS ìŠ¤í‚µ: `css: false` ëª¨ë“  í”„ë¡œì íŠ¸ì— ì¶”ê°€

#### Phase 3: CI ìƒ¤ë”© (2ì£¼) â€” 75% í–¥ìƒ (CIë§Œ)

1. `.github/workflows/ci.yml` ìƒ¤ë”© ì„¤ì •
2. 4ê°œ ë³‘ë ¬ ìƒ¤ë“œ êµ¬ì„±
3. merge-reports ìŠ¤í… ì¶”ê°€

#### Phase 4: ì§€ì†ì  ëª¨ë‹ˆí„°ë§ (ì§„í–‰ ì¤‘)

- ì›”ê°„ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì¶”ì 
- ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ì˜ ì„±ëŠ¥ ì˜í–¥ í‰ê°€
- ëŠë¦° í…ŒìŠ¤íŠ¸ ì‹ë³„ ë° ê°œì„ 

### ì„±ëŠ¥ ì¸¡ì •

```bash
# ê¸°ì¤€ì„  ì¸¡ì •
npm run test:smoke -- --reporter=verbose 2>&1 | tee baseline.txt
grep "Tests:" baseline.txt

# í”„ë¡œì íŠ¸ë³„ ì‹œê°„
npm run test -- --project <name> --reporter=verbose

# Vitest UI (ì‹œê°í™”)
npm run test:ui

# ë²¤ì¹˜ë§ˆí¬ (ì„±ëŠ¥ í…ŒìŠ¤íŠ¸)
npm run test:perf
```

### ì£¼ì˜ì‚¬í•­ âš ï¸

1. **ê²©ë¦¬ ë¹„í™œì„±í™”**: smoke/fastë§Œ ì ìš©, `afterEach` ì •ë¦¬ ê°•í™”
2. **happy-dom**: í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸ í•„ìˆ˜ (IntersectionObserver ì œì•½)
3. **CI ìƒ¤ë”©**: ë¡œì»¬ì—ì„œë„ ì¬í˜„ í…ŒìŠ¤íŠ¸ (`--shard=1/4`)
4. **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**: isolate=false ì‹œ ì •ê¸°ì  ëª¨ë‹ˆí„°ë§

### ì˜ˆìƒ ì„±ëŠ¥ í–¥ìƒ

| ìµœì í™” | ê°œë³„ íš¨ê³¼ | ëˆ„ì  | ë‚œì´ë„ |
|--------|---------|------|--------|
| ìºì‹± | 5-10% | 5-10% | â­ |
| isolate: false | 3-5ë°° | **~50%** | â­â­ |
| happy-dom | 3ë°° import | **~60%** | â­â­â­ |
| ë³‘ë ¬ ì¡°ì • | 5-10% | **~65%** | â­ |
| CI ìƒ¤ë”© | 4ë°° | **~75%** (CI) | â­â­ |

### ìƒì„¸ ê°€ì´ë“œ

ë” ìì„¸í•œ ë‚´ìš©ì€ ì´ì „ì˜ ìµœì í™” ê³„íš ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ê±°ë‚˜, í•„ìš”ì‹œ Vitest ê³µì‹ ê°€ì´ë“œ
([Performance](https://vitest.dev/guide/performance),
[Sharding](https://vitest.dev/guide/cli#sharding))ë¥¼ í™•ì¸í•˜ì„¸ìš”.

```

```
