# TDD 리팩토링 활성 계획

> **최종 업데이트**: 2025-10-15 **상태**: 대기 중 (Phase 67 완료, 다음 작업
> 없음) ⏸️

## 프로젝트 상태

- **빌드**: dev 839 KB / prod **317.00 KB** ✅ (번들 예산 8.00 KB 여유)
- **테스트**: 794 passing (763 base + 42 Phase 67), 1 skipped ✅
- **타입**: TypeScript strict, 0 errors ✅
- **린트**: ESLint 0 warnings ✅
- **의존성**: 0 violations (**257 modules**, **712 dependencies**) ✅
- **번들 예산**: **317.00 KB / 325 KB** (2.5% 여유, 충분) ✅

## 디자인 토큰 현황 (2025-10-15 - Phase 67 완료)

- **총 토큰**: **89개** (Phase 67 완료 후, 이전 123개에서 -34개, 27.6% 감소)
- **중복 정의**: 20개 (cross-scope 오버라이드, 정상)
- **미사용**: **0개** ✅
- **저사용 토큰**: **53개** (컴포넌트 응집도/아키텍처/접근성 이유로 유지)
- **정상 사용**: 36개

## 최근 완료 작업

### Phase 67: 디자인 토큰 보수적 최적화 (2025-10-15) ✅ 완료

**최종 결과**:

- 토큰 수: 123개 → **89개** (-34개, **27.6% 감소**)
- 번들 크기: 319.25 KB → **317.00 KB** (-2.25 KB, **0.7% 감소**)
- 번들 예산 여유: 8.00 KB (2.5% below target)
- 테스트: **42개 TDD 테스트 추가** (30 Step 1 + 1 Step 2 + 11 Step 3), 2개
  업데이트
- 커밋: 5개 (Step 1-3 완료 + 테스트 업데이트)

**완료 단계**:

- ✅ **Step 1**: 미사용 토큰 제거 (14개 제거, -0.73 KB)
- ✅ **Step 2**: 중복 토큰 스코프 검증 (2개 추가 제거, -0.45 KB)
- ✅ **Step 3**: 저사용 토큰 보수적 인라인 (18개 중 10개 제거, 53개 유지, -1.07
  KB)
- ⏭️ **Step 4-5**: CSS 중복/SVG 최적화 - **전략적 스킵** (ROI 분석 결과)

**Step 4-5 스킵 사유** (ROI 분석):

- **예상 시간**: 3-5시간
- **예상 효과**: 2-3 KB (0.6-0.9 KB/hour)
- **현재 상태**: 317.00 KB / 325 KB (충분한 여유)
- **위험도**: CSS 리팩토링 중 스타일 깨짐 가능성
- **결정**: 번들 여유 충분 + 낮은 ROI + 높은 위험 → 스킵
- **재검토 조건**: 번들이 322 KB (예산의 99%) 근접 시

**주요 학습**:

1. 컴포넌트 응집도 > 단순 사용량 (Toast 15개, Settings 9개 유지)
2. 아키텍처 토큰 유지 (Z-index, Layer, Focus)
3. 접근성 우선 (High-contrast 토큰 유지)
4. TDD 검증력 (42개 테스트로 안전한 리팩토링)
5. ROI 기반 결정 (Step 4-5 스킵 판단)

**세부 내역**: `docs/TDD_REFACTORING_PLAN_COMPLETED.md` Phase 67 섹션 참조

---

## 진행 중 작업

_현재 진행 중인 Phase 없음. 다음 작업은 필요 시 정의._

### 향후 계획 후보

**우선순위 1: 번들 크기 모니터링** (조건부)

- **트리거**: 번들이 322 KB (예산 99%) 근접 시
- **작업**: Phase 67 Step 4-5 재검토 (CSS 중복, SVG 최적화)

**우선순위 2: 성능 최적화** (필요 시)

- **트리거**: 사용자 피드백 또는 성능 이슈 발견
- **작업**: 로딩 시간, 렌더링 성능 개선

**우선순위 3: 유지보수** (주기적)

- **트리거**: 의존성 업데이트, 보안 패치
- **작업**: npm audit, dependency 업데이트

---

## 설계 원칙 (Phase 67에서 확립)

1. **유지보수성 우선**: 번들 크기 < 디자인 시스템 일관성
2. **컴포넌트 응집도**: 1× 사용도 컴포넌트 토큰 유지 가능
3. **명백한 과도 추상화만 제거**: 재사용 없는 단일 목적 토큰만 인라인
4. **접근성 우선**: WCAG 준수 토큰은 사용량 관계없이 유지
5. **TDD 검증**: 모든 리팩토링은 테스트로 검증
6. **ROI 기반 결정**: 시간 대비 효과 분석 후 진행 여부 결정

---

## 참고 문서

- **완료 기록**: `docs/TDD_REFACTORING_PLAN_COMPLETED.md`
- **아키텍처**: `docs/ARCHITECTURE.md`
- **코딩 가이드**: `docs/CODING_GUIDELINES.md`
- **유지보수**: `docs/MAINTENANCE.md`

---

## 최근 완료 작업 (Phase 60-67)

- **Phase 67**: 디자인 토큰 보수적 최적화 (34개 토큰 제거, 27.6% 감소)
  (2025-10-15) ✅
- **Phase 66 Part 2**: Focus Tracker Container Accessor Null 처리 (2025-10-14)
  ✅
- **Phase 66 Part 1**: Toolbar 순환 네비게이션 수정 (2025-10-14) ✅
- **Phase 65**: Orphan 파일 정리 (2025-01-27) ✅
- **Phase 64**: 포커스 트래킹 및 네비게이션 동기화 (2025-10-14) ✅
- **Phase 62-63**: 툴바 네비게이션 및 인덱스 관리 (2025-01-27) ✅
- **Phase 61**: 갤러리 스크롤 동작 정리 (2025-10-14) ✅

상세 이력은 `TDD_REFACTORING_PLAN_COMPLETED.md` 참고

---

## 문서 링크

- **온보딩**: `AGENTS.md` (개발 환경 및 워크플로)
- **아키텍처**: `ARCHITECTURE.md` (시스템 구조)
- **코딩 규칙**: `CODING_GUIDELINES.md` (스타일 가이드)
- **유지보수**: `MAINTENANCE.md` (점검 절차)
- `TDD_REFACTORING_PLAN_COMPLETED.md`: 완료된 Phase 기록 (Phase 67 Step 1-2
  포함)
- `TDD_REFACTORING_PLAN_Phase63.md`: Phase 63 상세 계획 (아카이브)
