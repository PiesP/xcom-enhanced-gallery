#!/usr/bin/env sh

# Pre-push: ensure types and tests are good before pushing
echo "🧪 Pre-push: typecheck + tests"

npm run typecheck || {
  echo "❌ Typecheck failed"
  exit 1
}

# 기본적으로 리팩터링 통합 테스트는 제외 (환경에 남은 토글 플래그 무시)
TEST_SKIP_BUILD=true VITEST_INCLUDE_REF_TESTS=0 npm run test || {
  echo "❌ Tests failed"
  exit 1
}

echo "✅ Pre-push checks passed"
