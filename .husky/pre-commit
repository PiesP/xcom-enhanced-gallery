#!/usr/bin/env sh

# Pre-commit: μ¤ν…μ΄μ§•λ νμΌμ— λ€ν• λ¦°ν„°/ν¬λ§¤ν„° μ‹¤ν–‰ (κ²½λ‰ λ²„μ „)
#
# μ—­ν• : μ»¤λ°‹ μ „ μ¤ν…μ΄μ§•λ νμΌλ§ λ¦°νΈ λ° ν¬λ§¤ν…
# CI μ¤ν‚µ: μ „μ²΄ κ²€μ¦μ€ GitHub Actionsμ—μ„ μ‹¤ν–‰
#
# μ°Έκ³ : AGENTS.mdμ "μ‘μ—… μΆ…λ£ μ²΄ν¬λ¦¬μ¤νΈ" μ„Ήμ… μ°Έκ³ 

if [ "$CI" = "true" ]; then
  echo "β­οΈ  Pre-commit: CI ν™κ²½μ—μ„ μ¤ν‚µλ¨ (GitHub Actionsμ—μ„ κ²€μ¦)"
  exit 0
fi

echo "π§Ή λ¦°νΈ-μ¤ν…μ΄μ§• μ‹¤ν–‰ μ¤‘..."

npm run lint:staged || {
  echo "β Pre-commit μ‹¤ν¨ (lint-staged μ¤λ¥)"
  echo "π’΅ ν: git diff --cachedλ΅ μ¤ν…μ΄μ§•λ λ³€κ²½μ‚¬ν•­μ„ ν™•μΈν•μ„Έμ”"
  exit 1
}

echo "β… Pre-commit ν†µκ³Ό"
