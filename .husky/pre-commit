#!/usr/bin/env sh

# =============================================================================
# Pre-commit Hook for X.com Enhanced Gallery (Optimized)
# =============================================================================
# ë³‘ë ¬ ì²˜ë¦¬ë¡œ ìµœì í™”ëœ ì»¤ë°‹ ì „ ê²€ì¦
# =============================================================================

echo "ğŸ” Pre-commit validation starting..."

# TypeScript Type Checkingê³¼ lint-staged ë³‘ë ¬ ì‹¤í–‰
echo "ğŸ“‹ Running type check and linting in parallel..."

npm run typecheck &
PID1=$!

npx lint-staged &
PID2=$!

# ëª¨ë“  ì‘ì—… ì™„ë£Œ ëŒ€ê¸°
wait $PID1 $PID2

# ì¢…ë£Œ ì½”ë“œ í™•ì¸
if [ $? -eq 0 ]; then
  echo "âœ… Pre-commit validation completed successfully!"
else
  echo "âŒ Pre-commit validation failed"
  exit 1
fi
