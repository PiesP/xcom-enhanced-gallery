/**
 * @fileoverview UnifiedButton CSS Module (Stage 2 primitives)
 * @description Button variants composed from shared controlSurface primitives.
 * @notes Button-specific tokens: --xeg-button-lift, --xeg-size-button-sm/md/lg/touch
 */

.unifiedButton {
  --xeg-control-gap: var(--xeg-spacing-sm);
  --xeg-control-padding-block: var(--xeg-spacing-sm);
  --xeg-control-padding-inline: var(--xeg-spacing-md);
  --xeg-control-min-height: var(--xeg-size-button-md);
  --xeg-control-bg: var(--xeg-color-neutral-100, var(--color-bg-secondary));
  --xeg-control-bg-hover: var(--xeg-color-neutral-200, var(--color-bg-primary));
  --xeg-control-border: var(--xeg-color-border-primary, var(--color-border-default));
  --xeg-control-border-hover: var(--xeg-color-border-hover, var(--color-border-emphasis));
  --xeg-control-color: var(--xeg-color-text-primary, var(--color-text-primary));
  --xeg-control-color-hover: var(--xeg-color-text-secondary, var(--color-text-secondary));
  --xeg-control-font-size: var(--xeg-font-size-base);
  --xeg-control-font-weight: var(--xeg-font-weight-medium);
  --xeg-control-lift: var(--xeg-button-lift, -1px);
  --xeg-control-radius: var(--xeg-radius-md);
  --xeg-control-shadow: none;
  --xeg-control-shadow-hover: var(--xeg-shadow-sm);
  --xeg-control-shadow-active: var(--xeg-shadow-xs, var(--xeg-shadow-sm));
}

/* ===== Size variants ===== */
.size-sm,
.sm {
  --xeg-control-padding-block: var(--xeg-spacing-xs);
  --xeg-control-padding-inline: var(--xeg-spacing-sm);
  --xeg-control-font-size: var(--xeg-font-size-sm);
  --xeg-control-min-height: var(--xeg-size-button-sm);
  --xeg-control-radius: var(--xeg-radius-sm);
}

.size-md,
.md {
  --xeg-control-padding-block: var(--xeg-spacing-sm);
  --xeg-control-padding-inline: var(--xeg-spacing-md);
  --xeg-control-min-height: var(--xeg-size-button-md);
}

.size-lg,
.lg {
  --xeg-control-padding-block: var(--xeg-spacing-md);
  --xeg-control-padding-inline: var(--xeg-spacing-lg);
  --xeg-control-font-size: var(--xeg-font-size-lg);
  --xeg-control-min-height: var(--xeg-size-button-lg);
  --xeg-control-radius: var(--xeg-radius-lg);
}

.size-toolbar {
  --xeg-control-width: var(--xeg-size-toolbar-button);
  --xeg-control-height: var(--xeg-size-toolbar-button);
  --xeg-control-min-width: var(--xeg-size-toolbar-button);
  --xeg-control-min-height: var(--xeg-size-toolbar-button);
  --xeg-control-padding-block: 0.5em;
  --xeg-control-padding-inline: 0.5em;
  --xeg-control-aspect-ratio: 1;
}

/* ===== Icon only helpers ===== */
.iconOnly {
  --xeg-control-aspect-ratio: 1;
  --xeg-control-padding-block: var(--xeg-spacing-sm);
  --xeg-control-padding-inline: var(--xeg-spacing-sm);
  --xeg-control-width: var(--xeg-size-button-md);
  --xeg-control-height: var(--xeg-size-button-md);
}

.iconOnly.size-sm {
  --xeg-control-width: var(--xeg-size-button-sm);
  --xeg-control-height: var(--xeg-size-button-sm);
}

.iconOnly.size-lg {
  --xeg-control-width: var(--xeg-size-button-lg);
  --xeg-control-height: var(--xeg-size-button-lg);
  --xeg-control-padding-block: var(--xeg-spacing-md);
  --xeg-control-padding-inline: var(--xeg-spacing-md);
}

/* ===== Visual variants ===== */
.variant-primary {
  --xeg-control-bg: var(--color-primary);
  --xeg-control-bg-hover: var(--color-primary-hover);
  --xeg-control-bg-active: var(--color-primary-active);
  --xeg-control-color: var(--color-text-inverse);
  --xeg-control-color-hover: var(--color-text-inverse);
  --xeg-control-border: var(--color-primary);
  --xeg-control-border-hover: var(--color-primary-hover);
  --xeg-control-border-active: var(--color-primary-active);
  --xeg-control-shadow: var(--xeg-shadow-sm);
  --xeg-control-shadow-hover: var(--xeg-shadow-md);
}

.variant-secondary {
  --xeg-control-bg: var(--color-bg-secondary);
  --xeg-control-bg-hover: var(--color-bg-primary);
  --xeg-control-border: var(--color-border-default);
  --xeg-control-border-hover: var(--color-border-emphasis);
  --xeg-control-color: var(--color-text-primary);
  --xeg-control-shadow: var(--xeg-shadow-sm);
  --xeg-control-shadow-hover: var(--xeg-shadow-md);
}

.variant-outline {
  --xeg-control-bg: transparent;
  --xeg-control-bg-hover: var(--color-bg-secondary);
  --xeg-control-border: var(--color-border-default);
  --xeg-control-border-hover: var(--color-border-emphasis);
  --xeg-control-color: var(--color-text-primary);
}

.variant-ghost {
  --xeg-control-bg: transparent;
  --xeg-control-border: transparent;
  --xeg-control-bg-hover: var(--color-overlay-button-light);
  --xeg-control-color: var(--color-text-secondary);
  --xeg-control-color-hover: var(--color-text-primary);
}

.variant-danger {
  --xeg-control-bg: var(--color-error);
  --xeg-control-bg-hover: var(--color-error-hover);
  --xeg-control-border: var(--color-error);
  --xeg-control-border-hover: var(--color-error-hover);
  --xeg-control-color: var(--color-text-inverse);
  --xeg-control-shadow: var(--xeg-shadow-sm);
  --xeg-control-shadow-hover: var(--xeg-shadow-md);
}

.variant-icon,
.icon {
  --xeg-control-aspect-ratio: 1;
  --xeg-control-padding-block: var(--xeg-spacing-sm);
  --xeg-control-padding-inline: var(--xeg-spacing-sm);
  --xeg-control-border: var(--color-border-default);
  --xeg-control-border-hover: var(--color-border-emphasis);
  --xeg-control-bg: transparent;
  --xeg-control-bg-hover: var(--color-bg-secondary);
  --xeg-control-color: var(--color-text-secondary);
  --xeg-control-color-hover: var(--color-text-primary);
  --xeg-control-shadow-hover: var(--xeg-shadow-sm);
}

.variant-toolbar {
  --xeg-control-width: var(--xeg-size-toolbar-button);
  --xeg-control-height: var(--xeg-size-toolbar-button);
  --xeg-control-min-width: var(--xeg-size-toolbar-button);
  --xeg-control-min-height: var(--xeg-size-toolbar-button);
  --xeg-control-padding-block: 0.5em;
  --xeg-control-padding-inline: 0.5em;
  --xeg-control-aspect-ratio: 1;
  --xeg-control-bg: transparent;
  --xeg-control-border: var(--color-border-default);
  --xeg-control-border-hover: var(--color-border-emphasis);
  --xeg-control-color: var(--color-text-primary);
  --xeg-control-bg-hover: var(--color-bg-secondary);
}

.variant-navigation {
  --xeg-control-width: var(--xeg-size-toolbar-button);
  --xeg-control-height: var(--xeg-size-toolbar-button);
  --xeg-control-min-width: var(--xeg-size-toolbar-button);
  --xeg-control-min-height: var(--xeg-size-toolbar-button);
  --xeg-control-padding-block: 0.5em;
  --xeg-control-padding-inline: 0.5em;
  --xeg-control-aspect-ratio: 1;
  --xeg-control-bg: var(--color-primary);
  --xeg-control-bg-hover: var(--color-primary-hover);
  --xeg-control-bg-active: var(--color-primary-active);
  --xeg-control-border: var(--color-primary);
  --xeg-control-border-hover: var(--color-primary-hover);
  --xeg-control-color: var(--color-text-inverse);
  --xeg-control-shadow: var(--xeg-shadow-sm);
  --xeg-control-shadow-hover: var(--xeg-shadow-md);
}

.variant-action {
  --xeg-control-width: var(--xeg-size-toolbar-button);
  --xeg-control-height: var(--xeg-size-toolbar-button);
  --xeg-control-min-width: var(--xeg-size-toolbar-button);
  --xeg-control-min-height: var(--xeg-size-toolbar-button);
  --xeg-control-padding-block: 0.5em;
  --xeg-control-padding-inline: 0.5em;
  --xeg-control-aspect-ratio: 1;
  --xeg-control-bg: var(--color-success);
  --xeg-control-bg-hover: var(--color-success-hover);
  --xeg-control-border: var(--color-success);
  --xeg-control-border-hover: var(--color-success-hover);
  --xeg-control-color: var(--color-text-inverse);
  --xeg-control-shadow: var(--xeg-shadow-sm);
  --xeg-control-shadow-hover: var(--xeg-shadow-md);
}

/* ===== Intent modifiers ===== */
.intent-primary,
.primary {
  --xeg-control-border: var(--color-primary);
  --xeg-control-border-hover: var(--color-primary-hover);
  --xeg-control-color: var(--color-primary);
  --xeg-control-color-hover: var(--color-primary-hover);
  --xeg-control-bg-hover: var(--color-info-bg);
}

.intent-success,
.success {
  --xeg-control-border: var(--color-success);
  --xeg-control-border-hover: var(--color-success-hover);
  --xeg-control-color: var(--color-success);
  --xeg-control-color-hover: var(--color-success-hover);
  --xeg-control-bg-hover: var(--color-success-bg);
}

.intent-danger,
.danger {
  --xeg-control-border: var(--color-error);
  --xeg-control-border-hover: var(--color-error-hover);
  --xeg-control-color: var(--color-error);
  --xeg-control-color-hover: var(--color-error-hover);
  --xeg-control-bg-hover: var(--color-error-bg);
}

.intent-neutral,
.neutral {
  --xeg-control-border: var(--color-border-default);
  --xeg-control-border-hover: var(--color-border-emphasis);
  --xeg-control-color: var(--color-text-secondary);
  --xeg-control-color-hover: var(--color-text-primary);
  --xeg-control-bg-hover: var(--color-bg-secondary);
}

/* ===== State helpers ===== */
.loading,
.variant-loading {
  cursor: wait;
  pointer-events: none;
  opacity: 0.8;
}

.unifiedButton:hover:not(:disabled):not([data-disabled='true']) {
  transform: translateY(var(--xeg-button-lift, -1px));
}

.unifiedButton:active:not(:disabled):not([data-disabled='true']) {
  transform: translateY(0);
}

.unifiedButton:focus-visible {
  outline: var(--xeg-focus-ring);
  outline-offset: var(--xeg-focus-ring-offset);
}

.disabled {
  cursor: not-allowed;
  pointer-events: none;
  opacity: var(--xeg-opacity-disabled, 0.5);
}

.spinner {
  width: 1em;
  height: 1em;
  border: 2px solid transparent;
  border-top: 2px solid currentColor;
  border-radius: 50%;
  animation: xeg-spin var(--xeg-duration-normal) var(--xeg-easing-linear, linear) infinite;
  margin-inline-end: var(--xeg-spacing-xs);
}

@keyframes xeg-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.hasIcon {
  --xeg-control-gap: var(--xeg-spacing-xs);
}

@media (prefers-contrast: high) {
  .variant-secondary,
  .variant-outline,
  .variant-ghost,
  .variant-icon {
    --xeg-control-bg: var(--color-base-white);
    --xeg-control-color: var(--color-base-black);
    --xeg-control-border: var(--color-base-black);
    --xeg-control-bg-hover: var(--color-base-black);
    --xeg-control-color-hover: var(--color-base-white);
  }

  .unifiedButton {
    border-width: 2px;
  }
}

@media (prefers-color-scheme: dark) {
  .variant-secondary,
  .variant-outline,
  .variant-ghost,
  .variant-icon {
    --xeg-control-bg: rgba(255, 255, 255, 0.08);
    --xeg-control-bg-hover: rgba(255, 255, 255, 0.16);
    --xeg-control-border: rgba(255, 255, 255, 0.18);
    --xeg-control-border-hover: rgba(255, 255, 255, 0.32);
    --xeg-control-color: var(--color-text-inverse);
    --xeg-control-color-hover: var(--color-text-inverse);
  }

  .variant-ghost {
    --xeg-control-border: transparent;
  }
}

@media (prefers-reduced-motion: reduce) {
  .spinner {
    animation: none;
  }
}
