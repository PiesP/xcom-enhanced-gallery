/**
 * @fileoverview Semantic Design Tokens
 * @description Role-based tokens that reference primitive values
 */

@layer xeg.tokens {
  :where(:root, .xeg-theme-scope) {
    /* Background Colors - Semantic Roles */
    --color-bg-primary: var(--color-base-white);
    --color-bg-secondary: var(--color-gray-50);
    --color-bg-surface: var(--color-base-white);
    --color-bg-elevated: var(--color-base-white);

    /* Gallery and toolbar background tokens */
    --xeg-bg-toolbar: var(--color-bg-surface);
    --xeg-toolbar-border: var(--xeg-color-border-primary);
    --xeg-toolbar-surface: var(--xeg-bg-toolbar);
    --xeg-toolbar-panel-surface: var(--xeg-toolbar-surface);

    /* Gallery Image Item Background Tokens */
    --xeg-color-bg-secondary: var(--color-bg-secondary);

    /* Gallery background (light/dark variants) */
    --xeg-gallery-bg-light: var(--color-bg-primary);
    --xeg-gallery-bg-dark: var(--color-gray-900);
    --xeg-gallery-bg: var(--xeg-gallery-bg-light);

    /* Root background fallback for gallery shell */
    --xeg-color-background: oklch(95% 0 0deg);

    /* Layout stability tokens */
    --xeg-aspect-default: 4 / 3;

    /* Text Colors - Semantic Roles */
    --color-text-primary: var(--color-base-black);
    --color-text-secondary: var(
      --color-gray-600
    ); /* Phase: design-consistency - improved from gray-700 */
    --color-text-muted: var(--color-gray-500);

    /* Border Colors - Semantic Roles */
    --color-border-default: var(--color-gray-200);
    --color-border-emphasis: var(--color-gray-500);
    --color-border-hover: var(--color-gray-300); /* Hover state for borders */

    /* Border Color Tokens - xeg prefix for consistency */
    --xeg-color-border-primary: var(--color-border-default);
    --xeg-color-border-hover: var(--color-border-hover);
    --xeg-color-border-strong: var(--color-border-emphasis);

    /* Toolbar color harmony tokens (light defaults) */
    --xeg-toolbar-text-color: var(--xeg-color-text-primary);
    --xeg-toolbar-text-muted: var(--xeg-color-text-secondary);
    --xeg-toolbar-element-bg: color-mix(
      in oklch,
      var(--xeg-bg-toolbar) 80%,
      var(--color-base-white) 20%
    );
    --xeg-toolbar-element-bg-strong: color-mix(
      in oklch,
      var(--xeg-bg-toolbar) 65%,
      var(--color-base-white) 35%
    );
    --xeg-toolbar-element-border: color-mix(
      in oklch,
      var(--xeg-toolbar-border) 85%,
      var(--color-base-white) 15%
    );
    --xeg-toolbar-progress-track: color-mix(
      in oklch,
      var(--xeg-toolbar-element-bg) 60%,
      var(--xeg-toolbar-element-border) 40%
    );
    --xeg-toolbar-scrollbar-track: color-mix(
      in oklch,
      var(--xeg-toolbar-element-bg) 50%,
      var(--color-base-white) 50%
    );
    --xeg-toolbar-scrollbar-thumb: color-mix(
      in oklch,
      var(--xeg-toolbar-element-border) 80%,
      var(--color-base-white) 20%
    );

    /* State Colors - Semantic Roles (monochrome, minimal) */
    --xeg-color-success: var(--color-gray-800);
    --xeg-color-success-hover: var(--color-gray-900);
    --xeg-color-success-bg: var(--color-gray-100);
    --xeg-color-error: var(--color-gray-800);
    --xeg-color-error-hover: var(--color-gray-900);
    --xeg-color-error-bg: var(--color-gray-100);
    --xeg-color-info-bg: var(--color-gray-50);

    /* Interactive Colors - Semantic Roles (monochrome accent) */
    --xeg-color-primary: var(--color-gray-900);
    --xeg-color-primary-hover: var(--color-gray-700);
    --xeg-color-primary-active: var(--color-gray-800);

    /* Neutral Colors for Button States (only used values) */
    --xeg-color-neutral-100: var(--color-gray-100);
    --xeg-color-neutral-200: var(--color-gray-200);
    --xeg-color-neutral-300: var(--color-gray-300);
    --xeg-color-neutral-400: var(--color-gray-400);
    --xeg-color-neutral-500: var(--color-gray-500);

    /* Text color aliases for components */
    --xeg-color-text-primary: var(--color-text-primary);
    --xeg-color-text-secondary: var(--color-text-secondary);
    --xeg-color-text-tertiary: var(--color-text-muted);
    --xeg-color-text-inverse: var(--color-base-white);

    /* Background color aliases for components */
    --xeg-color-bg-primary: var(--color-bg-primary);

    /* Overlay Colors - Semantic Roles */
    --color-overlay-medium: var(--color-gray-300);
    --color-overlay-backdrop: var(--color-gray-900);

    /* Component Sizing - Semantic Roles (em: relative to font-size) */
    --xeg-size-button-md: 2.5em; /* 40px @ 16px */

    /* Focus indicator tokens */
    --xeg-focus-indicator-color: var(--xeg-color-border-primary);

    /* Button Component Typography - Required by Button.module.css */
    --xeg-font-size-sm: 0.875rem;
    --xeg-font-size-base: 1rem;
    --xeg-font-size-lg: 1.125rem;
    --xeg-font-weight-medium: 500;
    --xeg-font-size-2xl: var(--font-size-2xl);

    /* Button Component Text Colors - Required by Button.module.css */
    /* Animation Timing - Semantic Roles */
    --xeg-duration-fast: var(--duration-fast);
    --xeg-duration-normal: var(--duration-normal);
    --xeg-duration-toolbar: var(--duration-normal);

    /* Surface Tokens - Flat panel style */
    --xeg-surface-bg: var(--color-bg-surface);
    --xeg-surface-border: var(--color-border-default);
    --xeg-surface-bg-hover: var(--color-bg-secondary);

    /* Elevated surfaces & skeletons */
    --xeg-color-surface-elevated: var(--color-bg-elevated);
    --xeg-skeleton-bg: var(--color-bg-secondary);

    /* Border emphasis aliases */
    --xeg-border-emphasis: var(--color-border-emphasis);

    /* Z-Index Management - anchored above twitter.com UI */
    --xeg-z-gallery: 2147483600;
    --xeg-z-toolbar-hover-zone: 2147483618;
    --xeg-z-toolbar: 2147483620;
    --xeg-z-toolbar-panel: 2147483622;
    --xeg-z-toolbar-panel-active: 2147483624;

    /* Layer Management - Semantic Roles (using z-index directly) */
    --xeg-layer-root: var(--xeg-z-gallery);

    /* Animation Easing */
    --xeg-easing-ease-out: cubic-bezier(0.4, 0, 0.2, 1);
    --xeg-easing-linear: linear;

    /* Line Height - Semantic Alias */
    --xeg-line-height-normal: var(--line-height-normal, 1.5);

    /* Interaction State Tokens */
    --xeg-button-lift: -0.0625rem; /* -1px */
    --xeg-opacity-disabled: 0.5;
    --xeg-hover-lift: translateY(-0.125rem);

    /* Typography Tokens - font-family referenced via primitive tokens */

    /* Border Radius - Extended Scale */
    --xeg-radius-sm: var(--radius-sm);
    --xeg-radius-md: var(--radius-md);
    --xeg-radius-lg: var(--radius-lg);
    --xeg-radius-2xl: var(--radius-2xl);
    --xeg-radius-full: var(--radius-full);
  }

  /* Theme Support - Dark/Light Mode */
  :where(:root, .xeg-theme-scope)[data-theme="light"] {
    --color-bg-primary: var(--color-base-white);
    --color-text-primary: var(--color-base-black);
    --color-text-secondary: var(--color-gray-600); /* Phase: design-consistency */
    --xeg-gallery-bg: var(--xeg-gallery-bg-light);
  }

  /* Dark mode - explicit attribute */
  :where(:root, .xeg-theme-scope)[data-theme="dark"] {
    --color-bg-primary: var(--color-gray-900);
    --color-bg-surface: var(--color-gray-900);
    --color-bg-elevated: var(--color-gray-700);
    --color-text-primary: var(--color-base-white);
    --color-text-secondary: var(--color-gray-400);
    --xeg-bg-toolbar: var(--color-gray-800);
    --xeg-color-border-primary: var(--color-gray-600);
    --xeg-toolbar-border: var(--color-gray-600);
    --xeg-color-bg-secondary: var(--color-gray-800);
    --xeg-gallery-bg: var(--xeg-gallery-bg-dark);
    --xeg-toolbar-text-color: var(--color-text-primary);
    --xeg-toolbar-text-muted: var(--color-gray-300);
    --xeg-toolbar-element-bg: color-mix(
      in oklch,
      var(--xeg-bg-toolbar) 85%,
      var(--color-base-black) 15%
    );
    --xeg-toolbar-element-bg-strong: color-mix(
      in oklch,
      var(--xeg-bg-toolbar) 70%,
      var(--color-base-black) 30%
    );
    --xeg-toolbar-element-border: color-mix(
      in oklch,
      var(--xeg-toolbar-border) 75%,
      var(--color-base-black) 25%
    );
    --xeg-toolbar-progress-track: color-mix(
      in oklch,
      var(--xeg-toolbar-border) 65%,
      var(--xeg-bg-toolbar) 35%
    );
    --xeg-toolbar-scrollbar-track: color-mix(
      in oklch,
      var(--xeg-toolbar-element-bg) 80%,
      var(--color-base-black) 20%
    );
    --xeg-toolbar-scrollbar-thumb: color-mix(
      in oklch,
      var(--xeg-toolbar-element-border) 85%,
      var(--color-base-black) 15%
    );
    --xeg-color-background: oklch(20% 0 0deg);
    --xeg-color-primary: var(--color-gray-100);
    --xeg-color-primary-hover: var(--color-gray-200);
    --xeg-color-primary-active: var(--color-gray-300);
    --xeg-surface-bg: var(--color-gray-900);
    --xeg-surface-border: var(--color-gray-600);
    --xeg-surface-bg-hover: var(--color-gray-800);
  }

  @media (prefers-reduced-motion: reduce) {
    :where(:root, .xeg-theme-scope) {
      /* Durations (design-tokens.semantic.css) */
      --xeg-duration-fast: 0ms;

      /* Transitions (design-tokens.component.css) */
      --xeg-transition-surface-fast: none;
      --xeg-transition-elevation-normal: none;
      --xeg-transition-elevation-fast: none;
      --xeg-transition-interaction-fast: none;
      --xeg-transition-width-normal: none;
    }
  }

  /* Component Scope Tokens */
  :where(:root, .xeg-theme-scope) {
    /* Settings Component Tokens */
    /* Layout */
    --xeg-settings-gap: var(--space-md);
    --xeg-settings-padding: var(--space-md);
    --xeg-settings-control-gap: var(--space-sm);

    /* Typography */
    --xeg-settings-label-font-size: var(--font-size-sm);
    --xeg-settings-label-font-weight: var(
      --font-weight-bold
    ); /* Phase D2: aligned with indicator (currentIndex) by switching to 700 */
    --xeg-settings-select-font-size: var(--font-size-sm);

    /* Input */
    --xeg-settings-select-padding: var(--space-sm) var(--space-md);
    /* Background/border reuse --xeg-bg-toolbar and --xeg-toolbar-border directly */
  }
}
