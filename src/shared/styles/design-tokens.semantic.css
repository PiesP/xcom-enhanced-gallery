/**
 * @fileoverview Semantic Design Tokens
 * @description 역할 기반 토큰들 - primitive 값들을 참조
 */

:root {
  /* Background Colors - Semantic Roles */
  --color-bg-primary: var(--color-base-white);
  --color-bg-secondary: var(--color-gray-50);
  --color-bg-surface: var(--color-base-white);
  --color-bg-elevated: var(--color-base-white);

  /* 갤러리 및 툴바 배경 토큰 */
  --xeg-bg-toolbar: var(--color-bg-surface);
  --xeg-toolbar-border: var(--color-border-default);

  /* Gallery Image Item Background Tokens */
  --xeg-color-bg-secondary: var(--color-bg-secondary);

  /* Gallery Background - 기본값(라이트) */
  --xeg-gallery-bg: var(--color-bg-primary);

  /* Text Colors - Semantic Roles */
  --color-text-primary: var(--color-base-black);
  --color-text-secondary: var(--color-gray-700);
  --color-text-muted: var(--color-gray-500);
  --color-text-inverse: var(--color-base-white);
  --color-text-error: oklch(1 0 0 / 70%); /* white with 70% opacity */
  --color-text-on-overlay: oklch(1 0 0 / 90%); /* white with 90% opacity */

  /* Border Colors - Semantic Roles */
  --color-border-default: var(--color-gray-200);
  --color-border-muted: var(--color-gray-100);
  --color-border-subtle: var(--color-gray-100);
  --color-border-emphasis: var(--color-gray-500);
  --color-border-hover: var(--color-gray-300); /* Hover state for borders */

  /* Border Color Tokens - xeg prefix for consistency */
  --xeg-color-border-hover: var(--color-border-hover);

  /* Button Tokens - Semantic Roles */
  --xeg-button-bg: var(--color-bg-surface);
  --xeg-button-border: var(--color-border-default);
  --xeg-button-text: var(--color-text-primary);
  --xeg-button-bg-hover: var(--color-bg-secondary);
  --xeg-button-border-hover: var(--color-border-hover);

  /* Modal Background/Border Tokens - 기본값(라이트) */
  --xeg-modal-bg: var(--color-bg-elevated);
  --xeg-modal-border: var(--color-border-default);

  /* Toolbar High Contrast Tokens (Phase 56) - 기본값(라이트) */
  --xeg-toolbar-bg-high-contrast: var(--xeg-color-neutral-100);
  --xeg-toolbar-border-high-contrast: var(--xeg-color-overlay-medium);
  --xeg-toolbar-button-bg-high-contrast: var(--xeg-glass-bg);
  --xeg-toolbar-button-border-high-contrast: var(--xeg-color-overlay-light);

  /* State Colors - Semantic Roles */
  --color-success: var(--color-green-500);
  --color-success-hover: var(--color-green-600);
  --color-success-bg: var(--color-green-50);
  --color-error: var(--color-red-500);
  --color-error-hover: var(--color-red-600);
  --color-error-bg: var(--color-red-50);
  --color-warning: var(--color-yellow-500);
  --color-warning-bg: var(--color-yellow-50);
  --color-info: var(--color-blue-500);
  --color-info-bg: var(--color-blue-50);

  /* Interactive Colors - Semantic Roles */
  --color-primary: var(--color-twitter-blue);
  --color-primary-hover: var(--color-twitter-blue-hover);
  --color-primary-active: var(--color-twitter-blue-active);

  /* Interactive Color Tokens - xeg prefix for consistency */
  --xeg-color-primary: var(--color-primary);
  --xeg-color-success: var(--color-success);

  /* Neutral Colors for Button States */
  --xeg-color-neutral-100: var(--color-gray-100);
  --xeg-color-neutral-200: var(--color-gray-200);
  --xeg-color-neutral-300: var(--color-gray-300);
  --xeg-color-neutral-400: var(--color-gray-400);
  --xeg-color-neutral-500: var(--color-gray-500);
  --xeg-color-neutral-700: var(--color-gray-700);
  --xeg-color-neutral-800: var(--color-gray-800);

  /* Overlay Colors - Semantic Roles (oklch with opacity tokens) */
  --color-overlay-light: oklch(0 0 0 / var(--opacity-overlay-light));
  --color-overlay-medium: oklch(0 0 0 / var(--opacity-overlay-medium));
  --color-overlay-strong: oklch(0 0 0 / var(--opacity-overlay-strong));
  --color-overlay-backdrop: oklch(0 0 0 / var(--opacity-overlay-backdrop));
  --color-overlay-light-bg: oklch(1 0 0 / 95%); /* white with 95% opacity */
  --color-overlay-dark-bg: oklch(0 0 0 / 95%); /* black with 95% opacity */
  --color-overlay-button-light: oklch(0 0 0 / 10%); /* black with 10% opacity */
  --color-overlay-button-light-hover: oklch(0 0 0 / 20%); /* black with 20% opacity */

  /* Glass Effect - Semantic Roles (oklch with opacity tokens) */
  --color-glass-bg: oklch(1 0 0 / var(--opacity-glass)); /* white with glass opacity */
  --color-glass-border: oklch(1 0 0 / 20%); /* white with 20% opacity */

  /* Spacing - Semantic Roles */
  --spacing-component-padding: var(--space-md);
  --spacing-component-margin: var(--space-sm);
  --spacing-section-gap: var(--space-lg);
  --spacing-item-gap: var(--space-sm);

  /* Component Sizing - Semantic Roles (em: relative to font-size) */
  --size-button-height: 2.5em; /* 40px @ 16px */
  --size-button-sm: 2em; /* 32px @ 16px */
  --size-button-md: 2.5em; /* 40px @ 16px */
  --size-button-lg: 3em; /* 48px @ 16px */
  --size-button-touch: 2.75em; /* 44px @ 16px, Touch-friendly button size */
  --size-input-height: 2.5em; /* 40px @ 16px */

  /* Button Size Tokens - xeg prefix for consistency */
  --xeg-size-button-sm: var(--size-button-sm);
  --xeg-size-button-md: var(--size-button-md);
  --xeg-size-button-lg: var(--size-button-lg);
  --xeg-size-button-touch: var(--size-button-touch);
  --size-icon-sm: 1em; /* 16px @ 16px */
  --size-icon-md: 1.25em; /* 20px @ 16px */
  --size-icon-lg: 1.5em; /* 24px @ 16px */

  /* Animation - Semantic Roles */
  --transition-fast: var(--duration-fast) cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: var(--duration-normal) cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: var(--duration-slow) cubic-bezier(0.4, 0, 0.2, 1);

  /* Shadows - Semantic Roles (rem for absolute positioning, oklch for colors) */
  --shadow-sm: 0 0.0625rem 0.125rem oklch(0 0 0 / 5%); /* 0 1px 2px, black 5% */
  --shadow-md: 0 0.25rem 0.75rem oklch(0 0 0 / 15%); /* 0 4px 12px, black 15% */
  --shadow-lg: 0 0.5rem 2rem oklch(0 0 0 / 15%); /* 0 8px 32px, black 15% */
  --shadow-xl: 0 0.25rem 1.25rem oklch(0 0 0 / 30%); /* 0 4px 20px, black 30% */
  --shadow-inset-border: 0 0 0 0.0625rem oklch(0 0 0 / 5%); /* 0 0 0 1px, black 5% */
  --shadow-gallery-image: var(--shadow-xl);
  --shadow-gallery-nav: var(--shadow-md);
  --shadow-thumbnail: 0 0.125rem 0.5rem oklch(0.234 0.006 277.8 / 8%); /* 0 2px 8px, slate-900 8% */
  --shadow-thumbnail-hover: 0 0.25rem 1rem oklch(0.234 0.006 277.8 / 12%); /* 0 4px 16px, slate-900 12% */

  /* Legacy Shadow Tokens - 호환성 보장 */
  --xeg-shadow-sm: var(--shadow-sm);
  --xeg-shadow-md: var(--shadow-md);
  --xeg-shadow-lg: var(--shadow-lg);
  --xeg-shadow-inset-border: var(--shadow-inset-border);

  /* Focus & Accessibility (rem for absolute outline width) */
  --xeg-focus-outline: 0.125rem solid var(--color-primary); /* 2px */
  --xeg-focus-offset: 0.125rem; /* 2px */

  /* Animation Timing - Semantic Roles */
  --xeg-duration: var(--duration-normal);
  --xeg-duration-fast: var(--duration-fast);
  --xeg-duration-slow: var(--duration-slow);

  /* Surface Glass - Unified Tokens */
  --xeg-surface-glass-bg: var(--color-glass-bg);
  --xeg-surface-glass-border: var(--color-glass-border);
  --xeg-surface-glass-shadow: var(--shadow-lg);

  /* Z-Index Management */
  --xeg-z-modal: 10000;
  --xeg-z-toolbar: 10001;
  --xeg-z-overlay: 9999;
  --xeg-z-toast: 10080;
  --xeg-z-gallery: var(--xeg-z-overlay);

  /* Layer Management - Semantic Roles */
  --xeg-layer-base: 0;
  --xeg-layer-toolbar: var(--xeg-z-toolbar);
  --xeg-layer-modal: var(--xeg-z-modal);
  --xeg-layer-toast: var(--xeg-z-toast);

  /* Animation Easing */
  --xeg-easing-ease-out: cubic-bezier(0.4, 0, 0.2, 1);
  --xeg-easing-ease-in: cubic-bezier(0.4, 0, 1, 1);
  --xeg-easing-ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* Interaction State Tokens */
  --xeg-button-lift: -1px;
  --xeg-button-lift-hover: -2px;
  --xeg-opacity-disabled: 0.5;

  /* Border Radius - Extended Scale */
  --xeg-radius-sm: var(--radius-sm);
  --xeg-radius-md: var(--radius-md);
  --xeg-radius-lg: var(--radius-lg);
  --xeg-radius-xl: var(--radius-xl);
  --xeg-radius-2xl: var(--radius-2xl);
  --xeg-radius-full: var(--radius-full);
}

/* Theme Support - Dark/Light Mode */
[data-theme='light'] {
  --color-bg-primary: var(--color-base-white);
  --color-text-primary: var(--color-base-black);
  --color-glass-bg: oklch(1 0 0 / var(--opacity-glass)); /* white with glass opacity */
}

[data-theme='dark'] {
  --color-bg-primary: var(--color-gray-900);
  --color-text-primary: var(--color-base-white);
  --color-glass-bg: oklch(0 0 0 / var(--opacity-glass)); /* black with glass opacity */

  /* Unified dark backgrounds - 툴바와 모달 모두 gray-800 사용 */
  --xeg-bg-toolbar: var(--color-gray-800);
  --xeg-toolbar-border: var(--color-border-emphasis);

  /* Gallery Image Item Dark Mode Tokens */
  --xeg-color-bg-secondary: var(--color-gray-800);

  /* Gallery Background - 다크 모드 */
  --xeg-gallery-bg: var(--color-gray-900);

  /* Button Tokens - Dark Mode */
  --xeg-button-bg: var(--color-gray-800);
  --xeg-button-border: var(--color-border-emphasis);
  --xeg-button-text: var(--color-text-primary);
  --xeg-button-bg-hover: var(--color-gray-700);
  --xeg-button-border-hover: var(--color-border-emphasis);

  /* Modal Background/Border Tokens - Dark Mode */
  --xeg-modal-bg: var(--color-gray-800);
  --xeg-modal-border: var(--color-border-emphasis);

  /* High Contrast Toolbar Tokens - Dark Mode (Phase 56) */
  --xeg-toolbar-bg-high-contrast: var(--xeg-color-neutral-900);
  --xeg-toolbar-border-high-contrast: var(--xeg-glass-border);
  --xeg-toolbar-button-bg-high-contrast: var(--xeg-color-neutral-700);
  --xeg-toolbar-button-border-high-contrast: var(--xeg-glass-border);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    --color-bg-primary: var(--color-gray-900);
    --color-text-primary: var(--color-base-white);
    --color-glass-bg: oklch(0 0 0 / var(--opacity-glass)); /* black with glass opacity */

    /* Unified dark backgrounds - 툴바와 모달 모두 gray-800 사용 */
    --xeg-bg-toolbar: var(--color-gray-800);
    --xeg-toolbar-border: var(--color-border-emphasis);
    --xeg-surface-glass-bg: oklch(0.234 0.006 277.8 / 95%); /* gray-900 with 95% opacity */

    /* Gallery Image Item Dark Mode Tokens */
    --xeg-color-bg-secondary: var(--color-gray-800);

    /* Gallery Background */
    --xeg-gallery-bg: var(--color-gray-900);

    /* Button Tokens - System Dark Mode */
    --xeg-button-bg: var(--color-gray-800);
    --xeg-button-border: var(--color-border-emphasis);
    --xeg-button-text: var(--color-text-primary);
    --xeg-button-bg-hover: var(--color-gray-700);
    --xeg-button-border-hover: var(--color-border-emphasis);

    /* Modal Background/Border Tokens - System Dark Mode */
    --xeg-modal-bg: var(--color-gray-800);
    --xeg-modal-border: var(--color-border-emphasis);
  }
}

@media (prefers-contrast: high) {
  :root {
    --xeg-focus-outline: 0.1875rem solid var(--color-primary); /* 3px */
    --color-border-emphasis: var(--color-base-black);
  }
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --xeg-duration: 0ms;
    --xeg-duration-fast: 0ms;
    --xeg-duration-slow: 0ms;
    --transition-fast: 0ms;
    --transition-normal: 0ms;
    --transition-slow: 0ms;
  }
}

/* Component Scope Tokens */
:root {
  /* Settings Component Tokens */
  /* Layout */
  --xeg-settings-gap: var(--space-md);
  --xeg-settings-padding: var(--space-md);
  --xeg-settings-control-gap: var(--space-sm);

  /* Typography */
  --xeg-settings-label-font-size: var(--font-size-sm);
  --xeg-settings-label-font-weight: var(--font-weight-medium);
  --xeg-settings-select-font-size: var(--font-size-sm);

  /* Input */
  --xeg-settings-select-padding: var(--space-sm) var(--space-md);
  --xeg-settings-select-bg: var(--xeg-bg-toolbar);
  --xeg-settings-select-border: var(--xeg-toolbar-border);

  /* Modal Component Tokens */
  /* NOTE: Modal component tokens now defer to semantic tokens to avoid
    cascading alias overwrite issues that previously caused dark mode
    transparency regressions (see 2025-09-11 fix log). */
  --xeg-comp-modal-backdrop: var(--color-overlay-backdrop);
  --xeg-comp-toolbar-bg: var(--xeg-bg-toolbar);
  --xeg-comp-toolbar-border: var(--xeg-toolbar-border);

  /* Toast Component Tokens (Phase 111.1: Monochrome Unification) */
  /* All Toast types now use the same gray-based colors for consistency.
   * Visual distinction is provided by icons (Phase 110.2) and text content. */
  --xeg-toast-bg-info: var(--xeg-surface-glass-bg);
  --xeg-toast-border-info: var(--color-gray-300);
  --xeg-toast-bg-success: var(--xeg-surface-glass-bg);
  --xeg-toast-border-success: var(--color-gray-300);
  --xeg-toast-bg-warning: var(--xeg-surface-glass-bg);
  --xeg-toast-border-warning: var(--color-gray-300);
  --xeg-toast-bg-error: var(--xeg-surface-glass-bg);
  --xeg-toast-border-error: var(--color-gray-300);
  --xeg-toast-bg-neutral: var(--xeg-surface-glass-bg);
  --xeg-toast-shadow-info: var(--xeg-shadow-md); /* 0 2px 8px */
  --xeg-toast-shadow-focus: var(--xeg-shadow-lg); /* 0 4px 16px */

  /* Toast Layout Tokens (Phase 52) */
  --xeg-toast-margin-bottom: var(--space-md); /* 16px - 4px grid normalized */
  --xeg-toast-padding: var(--space-lg); /* 24px - 4px grid normalized */
  --xeg-toast-gap: var(--space-sm); /* 8px - content gap */
  --xeg-toast-header-gap: var(--space-md); /* 16px - header gap normalized */
  --xeg-toast-min-width: 20rem; /* 320px */
  --xeg-toast-max-width: 30rem; /* 480px */
  --xeg-toast-border-width: 0.25rem; /* 4px */

  /* Toast Typography Tokens (Phase 52) */
  --xeg-toast-title-font-size: var(--font-size-sm); /* 14px */
  --xeg-toast-title-font-weight: 600;
  --xeg-toast-message-font-size: 0.8125rem; /* 13px */

  /* Focus Ring Utilities */
  --xeg-focus-ring: 0.125rem solid var(--color-gray-500); /* 2px */
  --xeg-focus-ring-offset: 0.125rem; /* 2px */
} /* ===== 유틸리티 클래스 ===== */

/* Toast 애니메이션 토큰 */
.xeg-anim-slide-in {
  animation: slideInFromRight var(--xeg-duration-fast) var(--xeg-ease-standard);
  will-change: transform, opacity;
  backface-visibility: hidden;
}

.xeg-anim-fade-slide-in {
  animation: fadeSlideIn var(--xeg-duration-normal) var(--xeg-ease-standard);
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/* Toast GPU 가속 keyframes */
@keyframes slideInFromRight {
  from {
    transform: translateX(100%) translateZ(0);
    opacity: 0;
  }
  to {
    transform: translateX(0) translateZ(0);
    opacity: 1;
  }
}

@keyframes fadeSlideIn {
  from {
    transform: translateY(-0.5rem) translateZ(0);
    opacity: 0;
  }
  to {
    transform: translateY(0) translateZ(0);
    opacity: 1;
  }
}

/* Focus Ring 유틸리티 클래스 */
.xeg-focus-ring {
  outline: var(--xeg-focus-ring);
  outline-offset: var(--xeg-focus-ring-offset);
}

.xeg-focus-ring:focus-visible {
  outline: var(--xeg-focus-ring);
  outline-offset: var(--xeg-focus-ring-offset);
}
