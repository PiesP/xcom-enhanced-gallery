/**
 * Gallery Component Global Styles - Twitter Native UI Integration
 * @version 3.2.0
 *
 * @description
 * Global styles for the gallery component. X.com (Twitter) brand patterns applied.
 * Complete support for dark/light modes, responsive design, and accessibility.
 * All colors use CSS variables (tokens), sizes use rem/em tokens.
 */

@layer xeg.features {
  /* ====== Surface Styles ====== */
  :where(.xeg-surface, .xeg-glass-surface, .glass-surface) {
    background: var(--xeg-surface-bg);
    border: var(--border-width-thin) solid var(--xeg-surface-border);
    border-radius: var(--xeg-radius-2xl);
    isolation: isolate;
    transition: opacity var(--xeg-duration-normal) var(--xeg-ease-standard);
  }

  :where(.xeg-surface, .xeg-glass-surface, .glass-surface):hover {
    background: var(--xeg-surface-bg-hover, var(--xeg-surface-bg));
  }

  /* Gallery renderer wrapper - Ensure block display */
  .xeg-gallery-renderer[data-renderer='gallery'] {
    display: block;
    width: 0;
    height: 0;
    overflow: visible;
  }

  .xeg-gallery-overlay,
  .xeg-gallery-viewer,
  .xeg-gallery-media,
  .xeg-gallery-error,
  .xeg-gallery-nav-left,
  .xeg-gallery-nav-right {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Gallery overlay - Full screen background */
  .xeg-gallery-overlay {
    position: fixed;
    inset: 0;
    z-index: var(--xeg-z-gallery, 10000);
    background: var(--xeg-gallery-bg);
    opacity: 1;
    transition: opacity var(--xeg-duration-normal) var(--xeg-ease-standard);
    pointer-events: auto;
  }

  /* Gallery container - Scrollable */
  .xeg-gallery-container {
    position: relative;
    width: 100%;
    height: 100%;
    max-width: 100vw;
    max-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: hidden;
  }

  /* Gallery toolbar - Fixed at top */
  .xeg-gallery-toolbar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3.75rem;
    background: var(--xeg-bg-toolbar);
    border-bottom: var(--border-width-thin) solid var(--xeg-color-border-primary);
    z-index: var(--xeg-z-toolbar);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 var(--space-lg);
    color: var(--xeg-toolbar-text-color, var(--xeg-color-text-primary));
    transition:
      var(--xeg-transition-surface-normal),
      var(--xeg-transition-elevation-normal);
  }

  .xeg-toolbar-section-left,
  .xeg-toolbar-section-center,
  .xeg-toolbar-section-right {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .xeg-toolbar-section-center {
    flex: 1;
    justify-content: center;
  }

  /* Gallery counter - Display current item */
  .xeg-gallery-counter {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--xeg-toolbar-text-color, var(--color-text-primary));
    background: var(--xeg-toolbar-element-bg, var(--color-bg-elevated));
    padding: 0.375em 0.75em;
    border-radius: var(--xeg-radius-lg);
    border: var(--border-width-thin) solid
      var(--xeg-toolbar-element-border, var(--color-border-default));
    margin-left: var(--space-md);
    transition: var(--xeg-transition-surface-normal);
  }

  /* Image fit button group */
  .xeg-fit-buttons {
    display: flex;
    gap: 0.25em;
    background: var(--xeg-toolbar-element-bg, var(--xeg-color-neutral-100));
    border: var(--border-width-thin) solid
      var(--xeg-toolbar-element-border, var(--xeg-color-neutral-200));
    border-radius: var(--xeg-radius-lg);
    padding: 0.25em;
    transition: var(--xeg-transition-surface-normal);
  }

  /* Download progress indicator */
  .xeg-download-progress {
    position: absolute;
    bottom: -3.125rem;
    left: 50%;
    transform: translateX(-50%);
    background: var(--xeg-bg-toolbar);
    border: var(--border-width-thin) solid var(--xeg-color-border-primary);
    border-radius: var(--xeg-radius-lg);
    padding: 0.75rem 1rem;
    min-width: 12.5rem;
    text-align: center;
    transition: opacity var(--xeg-duration-normal) var(--xeg-ease-standard);
  }

  .xeg-progress-bar {
    width: 100%;
    height: 0.25rem;
    background: var(--xeg-toolbar-progress-track, var(--xeg-color-neutral-200));
    border-radius: var(--radius-xs);
    overflow: clip;
    margin-bottom: var(--space-sm);
  }

  .xeg-progress-fill {
    height: 100%;
    background: var(--xeg-toolbar-text-color, var(--xeg-color-text-primary));
    transition: var(--xeg-transition-width-normal);
  }

  .xeg-progress-text {
    font-size: var(--font-size-xs);
    color: var(--xeg-toolbar-text-color, var(--xeg-button-text));
    font-weight: 500;
  }

  /* Main viewer area - Media display */
  .xeg-gallery-viewer {
    flex: 1;
    padding: 3.75rem 1.25rem 1.25rem;
    position: relative;
  }

  .xeg-gallery-media {
    max-width: 100%;
    max-height: 100%;
  }

  /* Gallery images and videos */
  .xeg-gallery-image,
  .xeg-gallery-video {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: var(--xeg-radius-lg);
    transition: transform var(--xeg-duration-normal) var(--xeg-ease-standard);
  }

  /* Gallery error message */
  .xeg-gallery-error {
    color: var(--color-text-error);
    font-size: var(--font-size-md);
  }

  /* Navigation buttons - Left/Right arrows */
  .xeg-gallery-nav-left,
  .xeg-gallery-nav-right {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: var(--xeg-toolbar-element-bg, var(--xeg-color-neutral-100));
    border: var(--border-width-thin) solid
      var(--xeg-toolbar-element-border, var(--xeg-border-button));
    border-radius: var(--xeg-radius-full);
    width: 3.125rem;
    height: 3.125rem;
    color: var(--xeg-toolbar-text-color, var(--xeg-color-text-primary));
    font-size: var(--font-size-xl);
    cursor: pointer;
    z-index: var(--xeg-z-gallery-overlay, 10008);
    transition:
      var(--xeg-transition-surface-normal),
      transform var(--xeg-duration-normal) var(--xeg-ease-standard);
  }

  .xeg-gallery-nav-left {
    left: 1.25rem;
  }

  .xeg-gallery-nav-right {
    right: 1.25rem;
  }

  .xeg-gallery-nav-left:hover,
  .xeg-gallery-nav-right:hover {
    background: var(--xeg-toolbar-element-bg-strong, var(--xeg-color-neutral-200));
    transform: translateY(-50%) translateY(-0.1875rem) scale(1.05);
  }

  .xeg-gallery-nav-left:active,
  .xeg-gallery-nav-right:active {
    transform: translateY(-50%) translateY(0);
  }

  .xeg-gallery-nav-left:disabled,
  .xeg-gallery-nav-right:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: translateY(-50%);
  }

  /* Thumbnail area - Bottom center */
  .xeg-gallery-thumbnails {
    position: absolute;
    bottom: 1.25rem;
    left: 50%;
    transform: translateX(-50%);
    max-width: calc(100vw - 2.5rem);
    z-index: var(--xeg-z-gallery-overlay, 10008);
  }

  .xeg-thumbnails-container {
    display: flex;
    gap: var(--space-sm);
    padding: 0.875rem;
    background: var(--xeg-bg-toolbar);
    border: var(--border-width-thin) solid var(--xeg-color-border-primary);
    border-radius: var(--xeg-radius-2xl);
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
    transition: var(--xeg-transition-surface-normal);
  }

  .xeg-thumbnails-container::-webkit-scrollbar {
    display: none;
  }

  /* Thumbnail item */
  .xeg-thumbnail {
    position: relative;
    background: none;
    border: var(--border-width-sm) solid transparent;
    border-radius: var(--xeg-radius-xl);
    padding: 0;
    cursor: pointer;
    flex-shrink: 0;
    overflow: clip;
    transition:
      var(--xeg-transition-surface-normal),
      transform var(--xeg-duration-normal) var(--xeg-ease-standard);
  }

  .xeg-thumbnail:hover {
    border-color: var(--xeg-color-neutral-400);
    transform: scale(1.08);
  }

  .xeg-thumbnail-active {
    border-color: var(--xeg-color-primary);
    transform: scale(1.12);
  }

  .xeg-thumbnail-image {
    width: 5rem;
    height: 5rem;
    object-fit: cover;
    border-radius: var(--xeg-radius-md);
    display: block;
  }

  .xeg-thumbnail-indicator {
    position: absolute;
    top: 0.25rem;
    right: 0.25rem;
    width: 0.5rem;
    height: 0.5rem;
    background: var(--xeg-color-primary);
    border-radius: var(--xeg-radius-full);
    border: var(--border-width-sm) solid
      var(--xeg-toolbar-element-border, var(--xeg-color-border-primary));
  }

  .xeg-thumbnail:focus,
  .xeg-thumbnail:focus-visible {
    border-color: var(--xeg-focus-indicator-color, var(--xeg-color-border-primary));
  }

  /* Backdrop - Click detection */
  .xeg-gallery-backdrop {
    position: absolute;
    inset: 0;
    z-index: var(--xeg-z-gallery-overlay);
    cursor: pointer;
  }

  /* Responsive Design - Tablet and Mobile */
  /* PC-only: Mobile styles removed (Phase 242) */

  /* Light mode colors managed by design-tokens.semantic.css */

  /* Phase 254: Reduced motion is automatically handled by semantic layer --xeg-duration-* tokens */
}
